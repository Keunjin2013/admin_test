<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¯¸ë””ì–´ ê´€ë¦¬ > ë³´ë„ìë£Œ > ëª©ë¡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            display: flex;
        }

        /* ì™¼ìª½ ì‚¬ì´ë“œë°” */
        .sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            overflow-y: auto;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #34495e;
            text-align: center;
        }

        .sidebar-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .user-info {
            font-size: 14px;
            color: #bdc3c7;
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-item {
            position: relative;
        }

        .menu-item > a {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            color: white;
            text-decoration: none;
            transition: background-color 0.3s;
            cursor: pointer;
        }

        .menu-arrow {
            transition: transform 0.3s;
            font-size: 12px;
        }

        .menu-item.active .menu-arrow {
            transform: rotate(180deg);
        }

        .menu-item > a:hover {
            background-color: #34495e;
        }

        .menu-item.active > a {
            background-color: #27ae60;
        }

        .submenu {
            display: none;
            background-color: #34495e;
        }

        .submenu.show {
            display: block;
        }

        .submenu a {
            display: block;
            padding: 12px 40px;
            color: #bdc3c7;
            text-decoration: none;
            transition: background-color 0.3s;
        }

        .submenu a:hover {
            background-color: #2c3e50;
        }

        .submenu a.active {
            background-color: #27ae60;
            color: white;
        }

        /* ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ */
        .main-wrapper {
            flex: 1;
            margin-left: 250px;
            min-height: 100vh;
        }

        /* ìƒë‹¨ í—¤ë” */
        .top-header {
            background: white;
            padding: 15px 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 999;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .breadcrumb {
            font-size: 14px;
            color: #666;
        }

        .breadcrumb a {
            color: #666;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            color: #007bff;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            padding: 8px 35px 8px 12px;
            border: 1px solid #ddd;
            border-radius: 20px;
            width: 200px;
            font-size: 14px;
        }

        .search-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            cursor: pointer;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #007bff;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: bold;
        }

        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            padding: 30px;
        }

        .content-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
        }

        /* ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ */
        .content-wrapper {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }

        /* í†µí•© ì½˜í…ì¸  ì˜ì—­ */
        .unified-content {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            width: 100%;
        }

        /* ì™¼ìª½ ì½˜í…ì¸  ì˜ì—­ (ê²€ìƒ‰, í…Œì´ë¸”, í˜ì´ì§€ë„¤ì´ì…˜) */
        .left-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* í…Œì´ë¸”ê³¼ í˜ì´ì§€ë„¤ì´ì…˜ì„ ë¬¶ì€ êµ¬ì—­ */
        .table-pagination-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* ê²€ìƒ‰/í•„í„° ì˜ì—­ */
        .search-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .search-form {
            display: flex;
            gap: 15px;
            align-items: end;
            flex-wrap: wrap;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .form-group label {
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }

        .form-control {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            min-width: 120px;
        }

        .form-control:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }

        .date-range {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-input-group {
            display: flex;
            gap: 5px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background-color: #0056b3;
        }

        /* í…Œì´ë¸” ì˜ì—­ */
        .table-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
            flex: 1;
        }

        .table-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background-color: #f8f9fa;
            padding: 12px 8px;
            text-align: center;
            font-weight: 600;
            color: #333;
            border-bottom: 2px solid #dee2e6;
            font-size: 14px;
        }

        .data-table td {
            padding: 12px 8px;
            text-align: center;
            border-bottom: 1px solid #dee2e6;
            font-size: 14px;
        }

        .data-table tbody tr:hover {
            background-color: #f8f9fa;
        }

        .data-table tbody tr.disabled {
            background-color: #f5f5f5;
            color: #999;
        }

        .title-link {
            color: #007bff;
            text-decoration: underline;
            cursor: pointer;
        }

        .title-link:hover {
            color: #0056b3;
        }

        /* í˜ì´ì§€ë„¤ì´ì…˜ */
        .pagination-section {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 20px;
            position: relative;
        }

        .register-button {
            position: absolute;
            right: 20px;
        }

        .pagination {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .pagination button {
            padding: 8px 12px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 4px;
            font-size: 14px;
        }

        .pagination button:hover {
            background-color: #f8f9fa;
        }

        .pagination button.active {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ì„¤ëª… íŒ¨ë„ */
        .description-panel {
            width: 300px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            height: fit-content;
            position: sticky;
            top: 140px;
            flex-shrink: 0;
        }

        .description-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .description-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }

        .add-description-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-right: 10px;
            transition: background-color 0.3s;
        }

        .add-description-btn:hover {
            background: #218838;
        }

        .save-description-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background-color 0.3s;
        }

        .save-description-btn:hover {
            background: #218838;
        }

        .edit-button {
            padding: 4px 8px;
            border: 1px solid #007bff;
            background: white;
            color: #007bff;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .edit-button:hover {
            background-color: #007bff;
            color: white;
        }

        .edit-button.complete {
            background-color: #28a745;
            border-color: #28a745;
            color: white;
        }

        .edit-button.complete:hover {
            background-color: #218838;
        }

        .description-item {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
            border-left: 4px solid #007bff;
        }

        .description-item h4 {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .description-item p {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }

        /* í¸ì§‘ ëª¨ë“œ ìŠ¤íƒ€ì¼ */
        .description-item.edit-mode {
            background: #fff3cd;
            border-left-color: #ffc107;
        }

        .description-item.edit-mode h4 {
            color: #856404;
        }

        .edit-form {
            display: none;
        }

        .edit-form.active {
            display: block;
        }

        .edit-form input,
        .edit-form textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            margin-bottom: 8px;
            font-family: inherit;
        }

        .edit-form textarea {
            resize: vertical;
            min-height: 60px;
        }

        .edit-form input:focus,
        .edit-form textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }

        .description-text {
            display: block;
        }

        .description-text.hidden {
            display: none;
        }

        .description-item {
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .description-item:hover {
            background-color: #f8f9fa;
        }

        .description-item.selected {
            background-color: #e3f2fd;
            border: 2px solid #2196f3;
        }

        .delete-description-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 10px;
            transition: background-color 0.3s;
        }

        .delete-description-btn:hover {
            background: #c82333;
        }

        .item-delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #dc3545;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }

        .description-item:hover .item-delete-btn {
            opacity: 1;
        }

        .description-item.selected .item-delete-btn {
            opacity: 1;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 1200px) {
            .unified-content {
                flex-direction: column;
            }
            
            .left-content {
                width: 100%;
            }
            
            .description-panel {
                width: 100%;
                margin-top: 20px;
                position: static;
            }
            
            .search-form {
                flex-direction: column;
                align-items: stretch;
            }
            
            .form-group {
                width: 100%;
            }
            
            .form-control {
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .data-table {
                font-size: 12px;
            }
            
            .data-table th,
            .data-table td {
                padding: 8px 4px;
            }
            
            .pagination-section {
                flex-direction: column;
                gap: 15px;
            }
            
            .register-button {
                position: static;
                align-self: flex-end;
            }
        }

        /* ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ í…Œì´ë¸” */
        .table-container {
            overflow-x: auto;
        }

        /* ìƒíƒœ í‘œì‹œ */
        .status-y {
            color: #28a745;
            font-weight: bold;
        }

        .status-n {
            color: #dc3545;
            font-weight: bold;
        }

        /* ì›í˜• ìˆ«ì ë”±ì§€ ìŠ¤íƒ€ì¼ */
        .badge-container {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 500px;
        }

        .number-badge {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #dc3545;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            cursor: move;
            user-select: none;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: transform 0.2s ease;
        }

        .number-badge:hover {
            transform: scale(1.1);
        }

        .number-badge.dragging {
            transform: scale(1.2);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        /* ìƒë‹¨ ë”±ì§€ ì˜ì—­ */
        .badge-toolbar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }

        .badge-toolbar .number-badge {
            position: relative;
            cursor: pointer;
        }

        .badge-toolbar .number-badge:hover {
            transform: scale(1.1);
        }

        /* ë“œë˜ê·¸ ì˜¤ë²„ íš¨ê³¼ */
        .badge-container.drag-over {
            background-color: rgba(220, 53, 69, 0.1);
            border: 2px dashed #dc3545;
        }

        /* ë“œë˜ê·¸ ì¤‘ì¸ ë”±ì§€ ìŠ¤íƒ€ì¼ */
        .number-badge.dragging {
            opacity: 0.5;
            transform: scale(1.2);
        }
    </style>
</head>
<body>
    <!-- ì™¼ìª½ ì‚¬ì´ë“œë°” -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-title"><a href="index.html" style="color: white; text-decoration: none;">Admin</a></div>
            <div class="user-info">ê¹€ì€ì§„</div>
        </div>
        <nav class="sidebar-menu">
            <div class="menu-item">
                <a href="#" onclick="toggleSubmenu(this)">
                    <span>ìš´ì˜ì ê´€ë¦¬</span>
                    <span class="menu-arrow">â–¼</span>
                </a>
                <div class="submenu">
                    <a href="#">ìš´ì˜ì ê´€ë¦¬</a>
                    <a href="#">ìš´ì˜ì ê¶Œí•œ ë¡œê·¸</a>
                    <a href="#">ìš´ì˜ì ë¡œê·¸ ê¸°ë¡</a>
                </div>
            </div>
            <div class="menu-item">
                <a href="#" onclick="toggleSubmenu(this)">
                    <span>ë©”ì¸ ê´€ë¦¬</span>
                    <span class="menu-arrow">â–¼</span>
                </a>
                <div class="submenu">
                    <a href="#">ë©”ì¸ íŒì—…</a>
                    <a href="#">ë©”ì¸ ë¡¤ë§</a>
                    <a href="#">ì§€ì†ê°€ëŠ¥ê²½ì˜</a>
                </div>
            </div>
            <div class="menu-item">
                <a href="#" onclick="toggleSubmenu(this)">
                    <span>íˆ¬ì ì •ë³´ ê´€ë¦¬</span>
                    <span class="menu-arrow">â–¼</span>
                </a>
                <div class="submenu">
                    <a href="#">ì¬ë¬´ì •ë³´</a>
                    <a href="#">ì£¼ì£¼ì†Œí†µ</a>
                    <a href="#">ì£¼ì£¼ì¢…íšŒ</a>
                    <a href="#">IR ìë£Œì‹¤</a>
                </div>
            </div>
            <div class="menu-item active">
                <a href="#" onclick="toggleSubmenu(this)">
                    <span>ë¯¸ë””ì–´ ê´€ë¦¬</span>
                    <span class="menu-arrow">â–¼</span>
                </a>
                <div class="submenu show">
                    <a href="media_list_admin.html" class="active">ë³´ë„ìë£Œ</a>
                    <a href="#">ì–¸ë¡  ê¸°ì‚¬</a>
                    <a href="#">ì´ë²¤íŠ¸</a>
                    <a href="#">í™ë³´ì˜ìƒ</a>
                </div>
            </div>
            <div class="menu-item">
                <a href="#" onclick="toggleSubmenu(this)">
                    <span>ì½˜í…ì¸  ê´€ë¦¬</span>
                    <span class="menu-arrow">â–¼</span>
                </a>
                <div class="submenu">
                    <a href="#">ì½˜í…ì¸  ê´€ë¦¬</a>
                </div>
            </div>
            <div class="menu-item">
                <a href="#" onclick="toggleSubmenu(this)">
                    <span>ê¸°íƒ€ ê´€ë¦¬</span>
                    <span class="menu-arrow">â–¼</span>
                </a>
                <div class="submenu">
                    <a href="#">ê¸°íƒ€ ê´€ë¦¬</a>
                </div>
            </div>
            <div class="menu-item">
                <a href="#" onclick="toggleSubmenu(this)">
                    <span>ì‚¬ì´ë²„ ê°ì‚¬ì‹¤ ê´€ë¦¬</span>
                    <span class="menu-arrow">â–¼</span>
                </a>
                <div class="submenu">
                    <a href="#">ì‚¬ì´ë²„ ê°ì‚¬ì‹¤ ê´€ë¦¬</a>
                </div>
            </div>
            <div class="menu-item">
                <a href="#" onclick="toggleSubmenu(this)">
                    <span>ë¶„ìŸì¡°ì • ê´€ë¦¬</span>
                    <span class="menu-arrow">â–¼</span>
                </a>
                <div class="submenu">
                    <a href="#">ë¶„ìŸì¡°ì • ê´€ë¦¬</a>
                </div>
            </div>
        </nav>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
    <div class="main-wrapper">
        <!-- ìƒë‹¨ í—¤ë” -->
        <div class="top-header">
            <div class="header-left">
                <div class="breadcrumb">
                    <a href="#">ë¯¸ë””ì–´ ê´€ë¦¬</a> > <a href="#">ë³´ë„ìë£Œ</a> > <span>ëª©ë¡</span>
                </div>
            </div>
            <div class="header-right">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥">
                    <span class="search-icon">ğŸ”</span>
                </div>
                <div class="user-avatar">ê¹€</div>
            </div>
        </div>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="main-content">
            <h1 class="content-title">ë³´ë„ìë£Œ ëª©ë¡</h1>
            
            <!-- ì›í˜• ìˆ«ì ë”±ì§€ íˆ´ë°” -->
            <div class="badge-toolbar" id="badgeToolbar">
                <!-- ë””ìŠ¤í¬ë¦½ì…˜ê³¼ ë§¤ì¹­ë˜ëŠ” ì›í˜• ë”±ì§€ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
            
            <div class="content-wrapper">
                <!-- í†µí•© ì½˜í…ì¸  ì˜ì—­ -->
                <div class="unified-content">
                    <!-- ì™¼ìª½ ì½˜í…ì¸  ì˜ì—­ -->
                    <div class="left-content">
                        <!-- ë“œë˜ê·¸ ê°€ëŠ¥í•œ ì˜ì—­ -->
                        <div class="badge-container" id="badgeContainer">
                            <!-- ê²€ìƒ‰/í•„í„° ì˜ì—­ -->
                            <div class="search-section">
                                <form class="search-form">
                                    <div class="form-group">
                                        <label>ë‚ ì§œ</label>
                                        <div class="date-range">
                                            <input type="date" class="form-control" id="startDate">
                                            <span>~</span>
                                            <input type="date" class="form-control" id="endDate">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>ì–¸ì–´</label>
                                        <select class="form-control" id="language">
                                            <option value="">ì „ì²´</option>
                                            <option value="KR">KR</option>
                                            <option value="EN">EN</option>
                                            <option value="CN">CN</option>
                                            <option value="JP">JP</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>ì¹´í…Œê³ ë¦¬</label>
                                        <select class="form-control" id="category">
                                            <option value="">ì „ì²´</option>
                                            <option value="ê¸°ì—…">ê¸°ì—…</option>
                                            <option value="ê¸°ìˆ ">ê¸°ìˆ </option>
                                            <option value="ESG">ESG</option>
                                            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>ê²€ìƒ‰</label>
                                        <div class="search-input-group">
                                            <select class="form-control" id="searchType" style="min-width: 80px;">
                                                <option value="all">ì „ì²´</option>
                                                <option value="title">ì œëª©</option>
                                                <option value="content">ë‚´ìš©</option>
                                            </select>
                                            <input type="text" class="form-control" id="searchKeyword" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" style="min-width: 200px;">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>&nbsp;</label>
                                        <button type="button" class="btn btn-primary" onclick="searchPress()">ê²€ìƒ‰</button>
                                    </div>
                                </form>
                            </div>

                            <!-- í…Œì´ë¸”ê³¼ í˜ì´ì§€ë„¤ì´ì…˜ì„ ë¬¶ì€ êµ¬ì—­ -->
                            <div class="table-pagination-section">
                                <!-- í…Œì´ë¸” ì˜ì—­ -->
                                <div class="table-section">
                                    <div class="table-header">
                                        <div class="table-title">ê²Œì‹œë¬¼ ëª©ë¡ (ìµœì‹  ë“±ë¡ìˆœ)</div>
                                    </div>
                                    
                                    <div class="table-container">
                                        <table class="data-table">
                                            <thead>
                                                <tr>
                                                    <th style="width: 60px;">ë²ˆí˜¸</th>
                                                    <th style="width: 60px;">ì–¸ì–´</th>
                                                    <th style="width: 80px;">ì¹´í…Œê³ ë¦¬</th>
                                                    <th style="width: 300px;">ì œëª©</th>
                                                    <th style="width: 80px;">ì‘ì„±ì</th>
                                                    <th style="width: 80px;">ì¡°íšŒìˆ˜</th>
                                                    <th style="width: 80px;">ìƒìœ„ë…¸ì¶œ</th>
                                                    <th style="width: 80px;">ë…¸ì¶œì—¬ë¶€</th>
                                                    <th style="width: 120px;">ë°œí–‰ì¼ì‹œ</th>
                                                    <th style="width: 120px;">ë“±ë¡ì¼ì‹œ</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Firebaseì—ì„œ ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë° ë“±ë¡ ë²„íŠ¼ -->
                                <div class="pagination-section">
                                    <div class="pagination" id="pagination">
                                        <!-- Firebaseì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                                    </div>
                                    
                                    <button class="btn btn-primary register-button" onclick="registerNew()">ë“±ë¡</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ì˜¤ë¥¸ìª½ ë””ìŠ¤í¬ë¦½ì…˜ íŒ¨ë„ -->
                    <div class="description-panel">
                        <div class="description-header">
                            <div class="description-title">Description</div>
                            <div>
                                <button class="add-description-btn" id="addDescriptionBtn" onclick="addNewDescription()" title="ìƒˆ ë””ìŠ¤í¬ë¦½ì…˜ ì¶”ê°€">ì¶”ê°€</button>
                                <button class="edit-button" id="editDescriptionBtn" onclick="toggleEditMode()">ìˆ˜ì •</button>
                                <button class="delete-description-btn" id="deleteDescriptionBtn" onclick="deleteSelectedDescription()" style="display: none;">ì‚­ì œ</button>
                                <button class="save-description-btn" id="saveDescriptionBtn" onclick="saveNewDescription()" style="display: none;">ì €ì¥</button>
                            </div>
                        </div>
                        
                        <!-- Firebaseì—ì„œ ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>
        </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Firebase ì„¤ì • (ì‹¤ì œ í”„ë¡œì íŠ¸ ì„¤ì •ìœ¼ë¡œ êµì²´ í•„ìš”)
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getStorage } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';

        // Firebase ì„¤ì • ê°ì²´ (Firebase ì½˜ì†”ì—ì„œ ë³µì‚¬í•œ ê°’ìœ¼ë¡œ êµì²´)
        const firebaseConfig = {
            apiKey: "AIzaSyC-6ngOcL8-CTy7GtUtOQPOVsEUVjZ-j_w",
            authDomain: "uber-admin-test.firebaseapp.com",
            projectId: "uber-admin-test",
            storageBucket: "uber-admin-test.firebasestorage.app",
            messagingSenderId: "704623921868",
            appId: "1:704623921868:web:057b0ffe418c0b79ecd069"
        };

        // Firebase ì´ˆê¸°í™”
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // ì „ì—­ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •
        window.firebaseAuth = auth;
        window.firebaseDb = db;
        window.firebaseStorage = storage;

        console.log('Firebaseê°€ ì„±ê³µì ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
    </script>

    <script>
        // Firebase ì—°ê²° í™•ì¸
        function checkFirebaseConnection() {
            if (window.firebaseAuth && window.firebaseDb) {
                console.log('Firebase ì—°ê²° ìƒíƒœ: ì„±ê³µ');
                return true;
            } else {
                console.log('Firebase ì—°ê²° ìƒíƒœ: ì‹¤íŒ¨');
                return false;
            }
        }

        // ê²€ìƒ‰ ê¸°ëŠ¥
        function searchPress() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const language = document.getElementById('language').value;
            const category = document.getElementById('category').value;
            const searchType = document.getElementById('searchType').value;
            const searchKeyword = document.getElementById('searchKeyword').value;
            
            console.log('ê²€ìƒ‰ ì¡°ê±´:', {
                startDate,
                endDate,
                language,
                category,
                searchType,
                searchKeyword
            });
            
            // ì‹¤ì œ ê²€ìƒ‰ ë¡œì§ êµ¬í˜„
            alert('ê²€ìƒ‰ ê¸°ëŠ¥ì´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.\nê²€ìƒ‰ ê²°ê³¼ëŠ” ë§ˆìŠ¤í‚¹ë˜ì–´ ë…¸ì¶œë©ë‹ˆë‹¤.');
        }

        // ìƒì„¸ë³´ê¸°
        function viewDetail(id) {
            console.log('ìƒì„¸ë³´ê¸°:', id);
            alert(`ê²Œì‹œë¬¼ ${id}ë²ˆì˜ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.`);
        }

        // ìƒˆ ê²Œì‹œë¬¼ ë“±ë¡
        function registerNew() {
            console.log('ìƒˆ ê²Œì‹œë¬¼ ë“±ë¡');
            window.location.href = 'media_upload_admin.html';
        }

        // í˜ì´ì§€ë„¤ì´ì…˜
        function goToPage(page) {
            if (page === 'first') {
                page = 1;
            } else if (page === 'prev') {
                page = Math.max(1, getCurrentPage() - 1);
            } else if (page === 'next') {
                page = getCurrentPage() + 1;
            } else if (page === 'last') {
                page = 10; // ì‹¤ì œë¡œëŠ” ì´ í˜ì´ì§€ ìˆ˜ë¥¼ ê³„ì‚°í•´ì•¼ í•¨
            }
            
            console.log('í˜ì´ì§€ ì´ë™:', page);
            
            // í™œì„± í˜ì´ì§€ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.pagination button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const targetBtn = document.querySelector(`.pagination button[onclick="goToPage(${page})"]`);
            if (targetBtn) {
                targetBtn.classList.add('active');
            }
        }

        // í˜„ì¬ í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°
        function getCurrentPage() {
            const activeBtn = document.querySelector('.pagination button.active');
            if (activeBtn) {
                const onclick = activeBtn.getAttribute('onclick');
                const match = onclick.match(/goToPage\((\d+)\)/);
                return match ? parseInt(match[1]) : 1;
            }
            return 1;
        }

        // í…Œì´ë¸” í–‰ í´ë¦­ ì´ë²¤íŠ¸
        document.querySelectorAll('.data-table tbody tr').forEach(row => {
            row.addEventListener('click', function(e) {
                // ì œëª© ë§í¬ í´ë¦­ì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ
                if (!e.target.classList.contains('title-link')) {
                    console.log('í–‰ í´ë¦­:', this.cells[0].textContent);
                }
            });
        });

        // ë‚ ì§œ í•„ë“œ ì´ˆê¸°ê°’ ì„¤ì • (ìµœê·¼ 1ê°œì›”)
        function setDefaultDateRange() {
            const today = new Date();
            const oneMonthAgo = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate());
            
            document.getElementById('endDate').value = today.toISOString().split('T')[0];
            document.getElementById('startDate').value = oneMonthAgo.toISOString().split('T')[0];
        }

        // Firebase ë°ì´í„°ë² ì´ìŠ¤ í•¨ìˆ˜ë“¤
        async function saveDescriptionToFirebase(descriptionData) {
            try {
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }

                const { collection, addDoc, doc, setDoc } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                // descriptions ì»¬ë ‰ì…˜ì— ë°ì´í„° ì €ì¥
                const docRef = await addDoc(collection(window.firebaseDb, 'descriptions'), {
                    ...descriptionData,
                    timestamp: new Date(),
                    updatedBy: 'admin'
                });
                
                console.log('ë””ìŠ¤í¬ë¦½ì…˜ì´ Firebaseì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ID:', docRef.id);
                return docRef.id;
            } catch (error) {
                console.error('Firebase ì €ì¥ ì˜¤ë¥˜:', error);
                throw error;
            }
        }

        async function loadDescriptionsFromFirebase() {
            try {
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }

                const { collection, getDocs, query, where, limit } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                // list_description ì»¬ë ‰ì…˜ì—ì„œ ìµœì‹  ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸°
                const q = query(
                    collection(window.firebaseDb, 'list_description'),
                    where('page', '==', 'media_list_admin'),
                    limit(1)
                );
                
                const querySnapshot = await getDocs(q);
                
                if (!querySnapshot.empty) {
                    const docSnapshot = querySnapshot.docs[0];
                    const data = docSnapshot.data();
                    console.log('Firebaseì—ì„œ ë””ìŠ¤í¬ë¦½ì…˜ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤:', data.descriptions);
                    return data.descriptions || [];
                } else {
                    console.log('ì €ì¥ëœ ë””ìŠ¤í¬ë¦½ì…˜ì´ ì—†ìŠµë‹ˆë‹¤.');
                    return [];
                }
            } catch (error) {
                console.error('Firebase ë¡œë“œ ì˜¤ë¥˜:', error);
                throw error;
            }
        }

        // Firebaseì—ì„œ ë¡œë“œí•œ ë””ìŠ¤í¬ë¦½ì…˜ì„ í™”ë©´ì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
        function displayDescriptionsFromFirebase(descriptions) {
            const descriptionPanel = document.querySelector('.description-panel');
            if (!descriptionPanel) return;

            // ê¸°ì¡´ ë””ìŠ¤í¬ë¦½ì…˜ í•­ëª©ë“¤ ì œê±° (í—¤ë” ì œì™¸)
            const existingItems = descriptionPanel.querySelectorAll('.description-item');
            existingItems.forEach(item => item.remove());

            // ID ê¸°ì¤€ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ (ìˆ«ìë¡œ ë³€í™˜í•˜ì—¬ ì •í™•í•œ ì •ë ¬)
            descriptions.sort((a, b) => {
                const aNumber = parseInt(a.id) || 0;
                const bNumber = parseInt(b.id) || 0;
                return aNumber - bNumber;
            });

            console.log('ì •ë ¬ëœ ë””ìŠ¤í¬ë¦½ì…˜ ID ìˆœì„œ:', descriptions.map(d => d.id));

            // Firebaseì—ì„œ ë¡œë“œí•œ ë””ìŠ¤í¬ë¦½ì…˜ë“¤ì„ í™”ë©´ì— í‘œì‹œ (ì •ë ¬ëœ ìˆœì„œëŒ€ë¡œ)
            descriptions.forEach(desc => {
                const descriptionItem = document.createElement('div');
                descriptionItem.className = 'description-item';
                descriptionItem.setAttribute('data-id', desc.id);
                
                descriptionItem.innerHTML = `
                    <button class="item-delete-btn" onclick="deleteDescriptionItem(event, '${desc.id}')" title="ì‚­ì œ">Ã—</button>
                    <h4>${desc.title}</h4>
                    <div class="description-text">
                        <p>${desc.content}</p>
                    </div>
                    <div class="edit-form">
                        <input type="number" value="${desc.id}" placeholder="ë²ˆí˜¸" min="1" class="id-input" style="width: 60px; margin-right: 10px;">
                        <input type="text" value="${desc.title.replace(/^\d+\.\s*/, '')}" placeholder="ì œëª©" style="width: calc(100% - 80px);">
                        <textarea placeholder="ì„¤ëª…">${desc.content}</textarea>
                    </div>
                `;

                // í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
                descriptionItem.addEventListener('click', function(event) {
                    handleDescriptionClick(event, desc.id);
                });

                // description-header ë’¤ì— ìˆœì°¨ì ìœ¼ë¡œ ì¶”ê°€ (ì •ë ¬ëœ ìˆœì„œ ìœ ì§€)
                const header = descriptionPanel.querySelector('.description-header');
                header.insertAdjacentElement('afterend', descriptionItem);
            });

            console.log('ë””ìŠ¤í¬ë¦½ì…˜ì´ í™”ë©´ì— í‘œì‹œë˜ì—ˆìŠµë‹ˆë‹¤:', descriptions.length, 'ê°œ');
        }

        // ë””ìŠ¤í¬ë¦½ì…˜ì„ Firebaseì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜
        async function saveDescriptionsToFirebase() {
            try {
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }

                const { 
                    collection, 
                    addDoc, 
                    updateDoc, 
                    doc, 
                    getDocs, 
                    query, 
                    where, 
                    orderBy, 
                    limit, 
                    serverTimestamp 
                } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                // í˜„ì¬ ë””ìŠ¤í¬ë¦½ì…˜ ë°ì´í„° ìˆ˜ì§‘ (DOM ìˆœì„œ ì—­ìˆœìœ¼ë¡œ ì •ë ¬)
                const descriptionItems = Array.from(document.querySelectorAll('.description-item')).reverse();
                const descriptions = [];
                
                console.log('ìˆ˜ì§‘í•  ë””ìŠ¤í¬ë¦½ì…˜ í•­ëª© ìˆ˜:', descriptionItems.length);
                
                descriptionItems.forEach(item => {
                    const itemId = item.getAttribute('data-id');
                    const h4 = item.querySelector('h4');
                    
                    // í¸ì§‘ ëª¨ë“œì¸ì§€ í™•ì¸
                    const editForm = item.querySelector('.edit-form');
                    const descriptionText = item.querySelector('.description-text');
                    
                    let title, content, finalId = itemId;
                    
                    if (editForm && editForm.style.display !== 'none') {
                        // í¸ì§‘ ëª¨ë“œì¸ ê²½ìš° - ID ì…ë ¥ í•„ë“œì™€ ì œëª© ì…ë ¥ í•„ë“œì—ì„œ ê°’ ê°€ì ¸ì˜¤ê¸°
                        const idInput = editForm.querySelector('.id-input');
                        const titleInput = editForm.querySelector('input[type="text"]');
                        const textarea = editForm.querySelector('textarea');
                        
                        // IDê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸
                        if (idInput) {
                            finalId = idInput.value.trim() || itemId;
                        }
                        
                        title = titleInput ? `${finalId}. ${titleInput.value}` : h4.textContent;
                        content = textarea ? textarea.value : '';
                    } else {
                        // ì¼ë°˜ ëª¨ë“œì¸ ê²½ìš° - ê¸°ì¡´ ë°©ì‹
                        const p = descriptionText ? descriptionText.querySelector('p') : null;
                        title = h4.textContent;
                        content = p ? p.textContent : '';
                    }
                    
                    descriptions.push({
                        id: finalId,
                        title: title,
                        content: content,
                        page: 'media_list_admin'
                    });
                    
                    console.log(`ë””ìŠ¤í¬ë¦½ì…˜ ${finalId}:`, { title, content });
                });
                
                console.log('ìˆ˜ì§‘ëœ ë””ìŠ¤í¬ë¦½ì…˜ ë°ì´í„°:', descriptions);
                
                // ê¸°ì¡´ ë¬¸ì„œ ì°¾ê¸° (ì¸ë±ìŠ¤ ë¬¸ì œ ë°©ì§€ë¥¼ ìœ„í•´ orderBy ì œê±°)
                const q = query(
                    collection(window.firebaseDb, 'list_description'),
                    where('page', '==', 'media_list_admin'),
                    limit(1)
                );
                
                const querySnapshot = await getDocs(q);
                
                if (!querySnapshot.empty) {
                    // ê¸°ì¡´ ë¬¸ì„œ ì—…ë°ì´íŠ¸
                    const docSnapshot = querySnapshot.docs[0];
                    await updateDoc(doc(window.firebaseDb, 'list_description', docSnapshot.id), {
                        descriptions: descriptions,
                        updatedAt: serverTimestamp(),
                        updatedBy: 'admin'
                    });
                    console.log('ë””ìŠ¤í¬ë¦½ì…˜ì´ Firebaseì—ì„œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤. ë¬¸ì„œ ID:', docSnapshot.id);
                    return docSnapshot.id;
                } else {
                    // ìƒˆ ë¬¸ì„œ ìƒì„±
                    const docRef = await addDoc(collection(window.firebaseDb, 'list_description'), {
                        page: 'media_list_admin',
                        descriptions: descriptions,
                        updatedAt: serverTimestamp(),
                        updatedBy: 'admin'
                    });
                    console.log('ë””ìŠ¤í¬ë¦½ì…˜ì´ Firebaseì— ìƒˆë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ë¬¸ì„œ ID:', docRef.id);
                    return docRef.id;
                }
            } catch (error) {
                console.error('Firebase ì €ì¥ ì˜¤ë¥˜:', error);
                throw error;
            }
        }

        // Firebaseì—ì„œ ê²Œì‹œê¸€ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadPressReleasesFromFirebase() {
            try {
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }

                const { collection, getDocs, orderBy, query } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                // ìµœì‹  ë“±ë¡ìˆœìœ¼ë¡œ ì •ë ¬í•˜ì—¬ ë¶ˆëŸ¬ì˜¤ê¸°
                const q = query(collection(window.firebaseDb, 'pressReleases'), orderBy('createdAt', 'desc'));
                const querySnapshot = await getDocs(q);
                const pressReleases = [];
                
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    pressReleases.push({
                        id: doc.id,
                        ...data,
                        // ë‚ ì§œ í¬ë§·íŒ…
                        publicationDateTime: formatDateTime(data.publicationDate, data.publicationTime),
                        createdAt: data.createdAt ? data.createdAt.toDate() : new Date()
                    });
                });
                
                console.log('Firebaseì—ì„œ ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤:', pressReleases);
                return pressReleases;
            } catch (error) {
                console.error('ê²Œì‹œê¸€ ë¡œë“œ ì˜¤ë¥˜:', error);
                throw error;
            }
        }

        // ë‚ ì§œì™€ ì‹œê°„ì„ í¬ë§·íŒ…í•˜ëŠ” í•¨ìˆ˜
        function formatDateTime(timestamp) {
            if (!timestamp) return '';
            
            // Firebase timestamp ê°ì²´ì¸ ê²½ìš°
            if (timestamp.seconds) {
                const dateObj = new Date(timestamp.seconds * 1000);
                const year = dateObj.getFullYear();
                const month = String(dateObj.getMonth() + 1).padStart(2, '0');
                const day = String(dateObj.getDate()).padStart(2, '0');
                const hour = String(dateObj.getHours()).padStart(2, '0');
                const minute = String(dateObj.getMinutes()).padStart(2, '0');
                return `${year}-${month}-${day} ${hour}:${minute}`;
            }
            
            // ì¼ë°˜ Date ê°ì²´ë‚˜ ë¬¸ìì—´ì¸ ê²½ìš°
            const dateObj = new Date(timestamp);
            if (isNaN(dateObj.getTime())) return '';
            
            const year = dateObj.getFullYear();
            const month = String(dateObj.getMonth() + 1).padStart(2, '0');
            const day = String(dateObj.getDate()).padStart(2, '0');
            const hour = String(dateObj.getHours()).padStart(2, '0');
            const minute = String(dateObj.getMinutes()).padStart(2, '0');
            return `${year}-${month}-${day} ${hour}:${minute}`;
        }

        // í…Œì´ë¸”ì— ê²Œì‹œê¸€ ë°ì´í„° í‘œì‹œ
        function displayPressReleases(pressReleases) {
            const tbody = document.querySelector('.data-table tbody');
            if (!tbody) return;

            tbody.innerHTML = '';

            pressReleases.forEach((item, index) => {
                const row = document.createElement('tr');
                
                // ë…¸ì¶œ ì—¬ë¶€ì— ë”°ë¼ ìŠ¤íƒ€ì¼ ì ìš©
                if (item.exposure === 'N') {
                    row.classList.add('disabled');
                }

                row.innerHTML = `
                    <td>${pressReleases.length - index}</td>
                    <td>${item.language}</td>
                    <td>${item.category}</td>
                    <td><span class="title-link" onclick="viewDetail('${item.id}')">${item.title}</span></td>
                    <td>${item.author}</td>
                    <td>${item.viewCount || 0}</td>
                    <td><span class="status-${item.topExposure === 'Y' ? 'y' : 'n'}">${item.topExposure}</span></td>
                    <td><span class="status-${item.exposure === 'Y' ? 'y' : 'n'}">${item.exposure}</span></td>
                    <td>${item.publicationDateTime}</td>
                    <td>${formatDateTime(item.updatedAt)}</td>
                `;

                tbody.appendChild(row);
            });
        }

        // ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°
        function viewDetail(id) {
            console.log('ìƒì„¸ë³´ê¸°:', id);
            window.location.href = `media_detail_admin.html?id=${id}`;
        }

        // Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ í•¨ìˆ˜

        // HTML ë””ìŠ¤í¬ë¦½ì…˜ í•­ëª©ë“¤ì„ ID ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•˜ëŠ” í•¨ìˆ˜
        function sortHtmlDescriptions() {
            const descriptionPanel = document.querySelector('.description-panel');
            if (!descriptionPanel) return;

            const descriptionItems = Array.from(descriptionPanel.querySelectorAll('.description-item'));
            
            // ID ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìˆ«ìë¡œ ë³€í™˜í•˜ì—¬ ì •í™•í•œ ì •ë ¬)
            descriptionItems.sort((a, b) => {
                const aId = parseInt(a.getAttribute('data-id')) || 0;
                const bId = parseInt(b.getAttribute('data-id')) || 0;
                return aId - bId;
            });

            console.log('ì •ë ¬ëœ HTML ë””ìŠ¤í¬ë¦½ì…˜ ID ìˆœì„œ:', descriptionItems.map(item => item.getAttribute('data-id')));

            // ì •ë ¬ëœ ìˆœì„œë¡œ DOMì— ë‹¤ì‹œ ì¶”ê°€ (ìœ„ì—ì„œë¶€í„° ìˆœì„œëŒ€ë¡œ)
            const header = descriptionPanel.querySelector('.description-header');
            // ê¸°ì¡´ í•­ëª©ë“¤ì„ ëª¨ë‘ ì œê±°
            descriptionItems.forEach(item => {
                item.remove();
            });
            // ì •ë ¬ëœ ìˆœì„œë¡œ ë‹¤ì‹œ ì¶”ê°€
            descriptionItems.forEach(item => {
                header.insertAdjacentElement('afterend', item);
            });
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', async function() {
            setDefaultDateRange();
            checkFirebaseConnection();
            
            // HTML ë””ìŠ¤í¬ë¦½ì…˜ í•­ëª©ë“¤ ì •ë ¬
            sortHtmlDescriptions();
            
            // ë“œë¡­ ì¡´ ì„¤ì •
            setupDropZone();
            
            console.log('ë¯¸ë””ì–´ ê´€ë¦¬ ë³´ë„ìë£Œ ëª©ë¡ í˜ì´ì§€ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
            
            // Firebase ì—°ê²° í™•ì¸ í›„ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
            setTimeout(async () => {
                if (checkFirebaseConnection()) {
                    try {
                        // list_description ì»¬ë ‰ì…˜ ì´ˆê¸°í™” (ì—†ìœ¼ë©´ ìƒì„±)
                        await initializeListDescriptionCollection();
                        
                        // ê²Œì‹œê¸€ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
                        const pressReleases = await loadPressReleasesFromFirebase();
                        displayPressReleases(pressReleases);
                        console.log('ê²Œì‹œê¸€ ëª©ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
                        
                        // ë””ìŠ¤í¬ë¦½ì…˜ ë¶ˆëŸ¬ì˜¤ê¸°
                        const descriptions = await loadDescriptionsFromFirebase();
                        displayDescriptionsFromFirebase(descriptions);
                        console.log('ë””ìŠ¤í¬ë¦½ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
                        
                        // ë”±ì§€ íˆ´ë°” ìƒì„±
                        createBadgeToolbar(descriptions);
                        console.log('ë”±ì§€ íˆ´ë°”ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.');
                        
                        // ì €ì¥ëœ ë”±ì§€ ìœ„ì¹˜ ë¶ˆëŸ¬ì˜¤ê¸° ë° ë³µì›
                        const savedPositions = await loadBadgePositionsFromFirebase();
                        if (Object.keys(savedPositions).length > 0) {
                            restoreBadgePositions(savedPositions);
                            console.log('ì €ì¥ëœ ë”±ì§€ ìœ„ì¹˜ê°€ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤.');
                        }
                        
                    } catch (error) {
                        console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                    }
                } else {
                    console.error('Firebase ì—°ê²°ì´ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            }, 1000);
        });

        // ê²€ìƒ‰ì–´ ì…ë ¥ ì‹œ ì—”í„°í‚¤ ì²˜ë¦¬
        document.getElementById('searchKeyword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPress();
            }
        });

        // ë””ìŠ¤í¬ë¦½ì…˜ í¸ì§‘ ëª¨ë“œ í† ê¸€
        let isEditMode = false;

        // ë””ìŠ¤í¬ë¦½ì…˜ ì„ íƒ ë° ì‚­ì œ ê´€ë ¨ ë³€ìˆ˜
        let selectedDescriptionId = null;

        // ë””ìŠ¤í¬ë¦½ì…˜ í•­ëª© í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
        function handleDescriptionClick(event, itemId) {
            // í¸ì§‘ ëª¨ë“œê°€ ì•„ë‹ ë•Œë§Œ ì„ íƒ ê¸°ëŠ¥ í™œì„±í™”
            if (!isEditMode) {
                // ì´ë¯¸ ì„ íƒëœ í•­ëª©ì„ ë‹¤ì‹œ í´ë¦­í•œ ê²½ìš° ì„ íƒ í•´ì œ
                if (selectedDescriptionId === itemId) {
                    event.currentTarget.classList.remove('selected');
                    selectedDescriptionId = null;
                } else {
                    // ê¸°ì¡´ ì„ íƒ í•´ì œ
                    document.querySelectorAll('.description-item').forEach(item => {
                        item.classList.remove('selected');
                    });
                    
                    // í˜„ì¬ í•­ëª© ì„ íƒ
                    event.currentTarget.classList.add('selected');
                    selectedDescriptionId = itemId;
                }
                
                // ì‚­ì œ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
                updateDeleteButtonVisibility();
            }
        }

        // ì‚­ì œ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€ ì—…ë°ì´íŠ¸
        function updateDeleteButtonVisibility() {
            const deleteBtn = document.getElementById('deleteDescriptionBtn');
            if (deleteBtn) {
                deleteBtn.style.display = selectedDescriptionId ? 'inline-block' : 'none';
            }
        }

        // ê°œë³„ ë””ìŠ¤í¬ë¦½ì…˜ í•­ëª© ì‚­ì œ í•¨ìˆ˜
        async function deleteDescriptionItem(event, itemId) {
            // ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ì§€ (ë¶€ëª¨ ìš”ì†Œì˜ í´ë¦­ ì´ë²¤íŠ¸ ë°©ì§€)
            event.stopPropagation();
            
            if (confirm('ì´ ë””ìŠ¤í¬ë¦½ì…˜ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                try {
                    // DOMì—ì„œ ì œê±°
                    const selectedItem = document.querySelector(`.description-item[data-id="${itemId}"]`);
                    if (selectedItem) {
                        selectedItem.remove();
                    }

                    // ì„ íƒ ìƒíƒœ ì´ˆê¸°í™” (ì‚­ì œëœ í•­ëª©ì´ ì„ íƒëœ ìƒíƒœì˜€ë‹¤ë©´)
                    if (selectedDescriptionId === itemId) {
                        selectedDescriptionId = null;
                        updateDeleteButtonVisibility();
                    }

                    // Firebaseì—ì„œ ì—…ë°ì´íŠ¸ëœ ëª©ë¡ ì €ì¥ (ì‚­ì œëœ í•­ëª© ì œì™¸)
                    await saveDescriptionsToFirebase();

                    // ì‚­ì œ í›„ ì •ë ¬ ì‹¤í–‰
                    sortHtmlDescriptions();

                    // í•´ë‹¹ ë”±ì§€ë¥¼ íˆ´ë°”ì™€ ë“œë˜ê·¸ ì˜ì—­ì—ì„œ ìë™ ì‚­ì œ
                    removeBadgeFromToolbar(itemId);
                    removeBadgeFromContainer(itemId);

                    alert('ë””ìŠ¤í¬ë¦½ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                } catch (error) {
                    console.error('ë””ìŠ¤í¬ë¦½ì…˜ ì‚­ì œ ì˜¤ë¥˜:', error);
                    alert('ë””ìŠ¤í¬ë¦½ì…˜ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            }
        }

        // ë””ìŠ¤í¬ë¦½ì…˜ ì‚­ì œ í•¨ìˆ˜
        async function deleteSelectedDescription() {
            if (!selectedDescriptionId) {
                alert('ì‚­ì œí•  ë””ìŠ¤í¬ë¦½ì…˜ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            if (confirm('ì„ íƒí•œ ë””ìŠ¤í¬ë¦½ì…˜ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                try {
                    // DOMì—ì„œ ì œê±°
                    const selectedItem = document.querySelector(`.description-item[data-id="${selectedDescriptionId}"]`);
                    if (selectedItem) {
                        selectedItem.remove();
                    }

                    // Firebaseì—ì„œ ì—…ë°ì´íŠ¸ëœ ëª©ë¡ ì €ì¥ (ì‚­ì œëœ í•­ëª© ì œì™¸)
                    await saveDescriptionsToFirebase();

                    // ì‚­ì œ í›„ ì •ë ¬ ì‹¤í–‰
                    sortHtmlDescriptions();

                    // í•´ë‹¹ ë”±ì§€ë¥¼ íˆ´ë°”ì™€ ë“œë˜ê·¸ ì˜ì—­ì—ì„œ ìë™ ì‚­ì œ
                    removeBadgeFromToolbar(selectedDescriptionId);
                    removeBadgeFromContainer(selectedDescriptionId);

                    // ì„ íƒ ìƒíƒœ ì´ˆê¸°í™”
                    selectedDescriptionId = null;
                    updateDeleteButtonVisibility();

                    alert('ë””ìŠ¤í¬ë¦½ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                } catch (error) {
                    console.error('ë””ìŠ¤í¬ë¦½ì…˜ ì‚­ì œ ì˜¤ë¥˜:', error);
                    alert('ë””ìŠ¤í¬ë¦½ì…˜ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            }
        }

        // ìƒˆë¡œìš´ ë””ìŠ¤í¬ë¦½ì…˜ ì¶”ê°€ í•¨ìˆ˜
        function addNewDescription() {
            const descriptionPanel = document.querySelector('.description-panel');
            const existingItems = document.querySelectorAll('.description-item');
            // ê¸°ì¡´ í•­ëª©ë“¤ì˜ ìµœëŒ€ IDë¥¼ ì°¾ì•„ì„œ ìƒˆ ID ìƒì„±
            let maxId = 0;
            existingItems.forEach(item => {
                const id = parseInt(item.getAttribute('data-id')) || 0;
                if (id > maxId) maxId = id;
            });
            const newId = maxId + 1;
            
            const newDescriptionItem = document.createElement('div');
            newDescriptionItem.className = 'description-item new-item';
            newDescriptionItem.setAttribute('data-id', newId);
            
            newDescriptionItem.innerHTML = `
                <button class="item-delete-btn" onclick="deleteDescriptionItem(event, '${newId}')" title="ì‚­ì œ">Ã—</button>
                <h4>${newId}. ìƒˆ í•­ëª©</h4>
                <div class="description-text">
                    <p>- ìƒˆë¡œ ì¶”ê°€ëœ ë””ìŠ¤í¬ë¦½ì…˜ í•­ëª©ì…ë‹ˆë‹¤.</p>
                </div>
                <div class="edit-form">
                    <input type="number" value="${newId}" placeholder="ë²ˆí˜¸" min="1" class="id-input" style="width: 60px; margin-right: 10px;">
                    <input type="text" value="ìƒˆ í•­ëª©" placeholder="ì œëª©" style="width: calc(100% - 80px);">
                    <textarea placeholder="ì„¤ëª…">- ìƒˆë¡œ ì¶”ê°€ëœ ë””ìŠ¤í¬ë¦½ì…˜ í•­ëª©ì…ë‹ˆë‹¤.</textarea>
                </div>
            `;
            
            // í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
            newDescriptionItem.addEventListener('click', function(event) {
                handleDescriptionClick(event, newId);
            });
            
            // description-header ë’¤ì— ì¶”ê°€
            const header = descriptionPanel.querySelector('.description-header');
            header.insertAdjacentElement('afterend', newDescriptionItem);
            
            // ìƒˆë¡œ ì¶”ê°€ëœ í•­ëª©ì„ í¸ì§‘ ëª¨ë“œë¡œ ì„¤ì •
            newDescriptionItem.classList.add('edit-mode');
            const editForm = newDescriptionItem.querySelector('.edit-form');
            const descriptionText = newDescriptionItem.querySelector('.description-text');
            if (editForm && descriptionText) {
                editForm.style.display = 'block';
                descriptionText.style.display = 'none';
            }
            
            // í¸ì§‘ ëª¨ë“œ í™œì„±í™”
            isEditMode = true;
            
            // ë²„íŠ¼ ìƒíƒœ ë³€ê²½: ìˆ˜ì • ë²„íŠ¼ ìˆ¨ê¸°ê³  ì €ì¥ ë²„íŠ¼ í‘œì‹œ
            const editBtn = document.getElementById('editDescriptionBtn');
            const saveBtn = document.getElementById('saveDescriptionBtn');
            editBtn.style.display = 'none';
            saveBtn.style.display = 'inline-block';
            
            // ìƒˆ í•­ëª© ì¶”ê°€ í›„ ì •ë ¬ ì‹¤í–‰
            sortHtmlDescriptions();
            
            // ìƒˆë¡œìš´ ë”±ì§€ë¥¼ íˆ´ë°”ì— ìë™ ì¶”ê°€
            addBadgeToToolbar(newId);
        }

        // ID ì¤‘ë³µ ì²´í¬ í•¨ìˆ˜
        function checkDuplicateId(newId, excludeItemId = null) {
            const existingItems = document.querySelectorAll('.description-item:not(.new-item)');
            for (let item of existingItems) {
                const itemId = item.getAttribute('data-id');
                if (itemId === newId && itemId !== excludeItemId) {
                    return true; // ì¤‘ë³µ ë°œê²¬
                }
            }
            return false; // ì¤‘ë³µ ì—†ìŒ
        }

        // ìƒˆ ë””ìŠ¤í¬ë¦½ì…˜ ì €ì¥ í•¨ìˆ˜
        async function saveNewDescription() {
            try {
                // ìƒˆë¡œ ì¶”ê°€ëœ í•­ëª©ë“¤ì„ ì°¾ì•„ì„œ ì €ì¥
                const newItems = document.querySelectorAll('.description-item.new-item');
                
                if (newItems.length === 0) {
                    alert('ì €ì¥í•  ìƒˆë¡œìš´ ë””ìŠ¤í¬ë¦½ì…˜ì´ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                // ID ì¤‘ë³µ ì²´í¬
                for (let item of newItems) {
                    const editForm = item.querySelector('.edit-form');
                    const idInput = editForm.querySelector('.id-input');
                    const newId = idInput.value.trim();
                    
                    if (!newId || newId === '') {
                        alert('ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                        return;
                    }
                    
                    if (checkDuplicateId(newId)) {
                        alert('ì´ë¯¸ í•´ë‹¹ë˜ëŠ” ë²ˆí˜¸ê°€ ìˆìŠµë‹ˆë‹¤.');
                        return;
                    }
                }
                
                // ID ì—…ë°ì´íŠ¸ ë° ë”±ì§€ ë™ê¸°í™”
                for (let item of newItems) {
                    const editForm = item.querySelector('.edit-form');
                    const idInput = editForm.querySelector('.id-input');
                    const oldId = item.getAttribute('data-id');
                    const newId = idInput.value.trim();
                    
                    // IDê°€ ë³€ê²½ëœ ê²½ìš°
                    if (oldId !== newId) {
                        // ê¸°ì¡´ ë”±ì§€ ì œê±°
                        removeBadgeFromToolbar(oldId);
                        removeBadgeFromContainer(oldId);
                        
                        // ìƒˆë¡œìš´ IDë¡œ ì—…ë°ì´íŠ¸
                        item.setAttribute('data-id', newId);
                        
                        // ìƒˆë¡œìš´ ë”±ì§€ ì¶”ê°€
                        addBadgeToToolbar(newId);
                    }
                }
                
                // Firebaseì— ì €ì¥
                await saveDescriptionsToFirebase();
                
                // ìƒˆ í•­ëª©ë“¤ì„ ì¼ë°˜ ë””ìŠ¤í¬ë¦½ì…˜ìœ¼ë¡œ ë³€í™˜
                newItems.forEach(item => {
                    // new-item í´ë˜ìŠ¤ ì œê±°
                    item.classList.remove('new-item');
                    
                    // í¸ì§‘ ëª¨ë“œ í•´ì œ
                    item.classList.remove('edit-mode');
                    
                    // í¸ì§‘ í¼ ìˆ¨ê¸°ê³  ì¼ë°˜ í…ìŠ¤íŠ¸ í‘œì‹œ
                    const editForm = item.querySelector('.edit-form');
                    const descriptionText = item.querySelector('.description-text');
                    if (editForm && descriptionText) {
                        editForm.style.display = 'none';
                        descriptionText.style.display = 'block';
                        
                        // ì…ë ¥ëœ ê°’ìœ¼ë¡œ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
                        const idInput = editForm.querySelector('.id-input');
                        const titleInput = editForm.querySelector('input[type="text"]');
                        const textarea = editForm.querySelector('textarea');
                        const h4 = item.querySelector('h4');
                        const p = descriptionText.querySelector('p');
                        
                        if (idInput && titleInput && h4) {
                            // ë²ˆí˜¸ë¥¼ í¬í•¨í•œ ì œëª©ìœ¼ë¡œ ì—…ë°ì´íŠ¸
                            const itemId = item.getAttribute('data-id');
                            h4.textContent = `${itemId}. ${titleInput.value}`;
                        }
                        if (textarea && p) {
                            p.textContent = textarea.value;
                        }
                    }
                });
                
                // í¸ì§‘ ëª¨ë“œ í•´ì œ
                isEditMode = false;
                
                // ë²„íŠ¼ ìƒíƒœ ë³µì›: ì €ì¥ ë²„íŠ¼ ìˆ¨ê¸°ê³  ìˆ˜ì • ë²„íŠ¼ í‘œì‹œ
                const editBtn = document.getElementById('editDescriptionBtn');
                const saveBtn = document.getElementById('saveDescriptionBtn');
                editBtn.style.display = 'inline-block';
                saveBtn.style.display = 'none';
                editBtn.textContent = 'ìˆ˜ì •';
                
                // ì €ì¥ í›„ ì •ë ¬ ì‹¤í–‰
                sortHtmlDescriptions();
                
                alert('ìƒˆë¡œìš´ ë””ìŠ¤í¬ë¦½ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                
            } catch (error) {
                console.error('ë””ìŠ¤í¬ë¦½ì…˜ ì €ì¥ ì˜¤ë¥˜:', error);
                alert('ë””ìŠ¤í¬ë¦½ì…˜ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        }

        async function toggleEditMode() {
            const editBtn = document.getElementById('editDescriptionBtn');
            const descriptionItems = document.querySelectorAll('.description-item');
            
            isEditMode = !isEditMode;
            
            if (isEditMode) {
                // í¸ì§‘ ëª¨ë“œë¡œ ì „í™˜
                editBtn.textContent = 'ì™„ë£Œ';
                editBtn.classList.add('complete');
                
                descriptionItems.forEach(item => {
                    // new-itemì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ í¸ì§‘ ëª¨ë“œ ì ìš©
                    if (!item.classList.contains('new-item')) {
                        item.classList.add('edit-mode');
                        const textDiv = item.querySelector('.description-text');
                        const formDiv = item.querySelector('.edit-form');
                        
                        // ê¸°ì¡´ í¸ì§‘ í¼ì´ ì—†ëŠ” ê²½ìš° ìƒˆë¡œ ìƒì„±
                        if (!formDiv) {
                            const itemId = item.getAttribute('data-id');
                            const h4 = item.querySelector('h4');
                            const p = textDiv.querySelector('p');
                            
                            const newFormDiv = document.createElement('div');
                            newFormDiv.className = 'edit-form';
                            newFormDiv.innerHTML = `
                                <input type="number" value="${itemId}" placeholder="ë²ˆí˜¸" min="1" class="id-input" style="width: 60px; margin-right: 10px;">
                                <input type="text" value="${h4.textContent.replace(/^\d+\.\s*/, '')}" placeholder="ì œëª©" style="width: calc(100% - 80px);">
                                <textarea placeholder="ì„¤ëª…">${p.textContent}</textarea>
                            `;
                            
                            item.appendChild(newFormDiv);
                        }
                        
                        const updatedFormDiv = item.querySelector('.edit-form');
                        textDiv.style.display = 'none';
                        updatedFormDiv.style.display = 'block';
                    }
                });
            } else {
                // í¸ì§‘ ëª¨ë“œ ì¢…ë£Œ ë° ì €ì¥
                editBtn.textContent = 'ìˆ˜ì •';
                editBtn.classList.remove('complete');
                
                // ID ì¤‘ë³µ ì²´í¬
                for (let item of descriptionItems) {
                    if (!item.classList.contains('new-item')) {
                        const formDiv = item.querySelector('.edit-form');
                        if (formDiv) {
                            const idInput = formDiv.querySelector('.id-input');
                            const newId = idInput.value.trim();
                            const oldId = item.getAttribute('data-id');
                            
                            if (!newId || newId === '') {
                                alert('ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                                return;
                            }
                            
                            if (newId !== oldId && checkDuplicateId(newId)) {
                                alert('ì´ë¯¸ í•´ë‹¹ë˜ëŠ” ë²ˆí˜¸ê°€ ìˆìŠµë‹ˆë‹¤.');
                                return;
                            }
                        }
                    }
                }
                
                // ID ì—…ë°ì´íŠ¸ ë° ë”±ì§€ ë™ê¸°í™”
                for (let item of descriptionItems) {
                    if (!item.classList.contains('new-item')) {
                        const formDiv = item.querySelector('.edit-form');
                        if (formDiv) {
                            const idInput = formDiv.querySelector('.id-input');
                            const titleInput = formDiv.querySelector('input[type="text"]');
                            const textarea = formDiv.querySelector('textarea');
                            const oldId = item.getAttribute('data-id');
                            const newId = idInput.value.trim();
                            
                            // IDê°€ ë³€ê²½ëœ ê²½ìš°
                            if (oldId !== newId) {
                                // ê¸°ì¡´ ë”±ì§€ ì œê±°
                                removeBadgeFromToolbar(oldId);
                                removeBadgeFromContainer(oldId);
                                
                                // ìƒˆë¡œìš´ IDë¡œ ì—…ë°ì´íŠ¸
                                item.setAttribute('data-id', newId);
                                
                                // ìƒˆë¡œìš´ ë”±ì§€ ì¶”ê°€
                                addBadgeToToolbar(newId);
                            }
                        }
                    }
                }
                
                descriptionItems.forEach(item => {
                    if (!item.classList.contains('new-item')) {
                        item.classList.remove('edit-mode');
                        const textDiv = item.querySelector('.description-text');
                        const formDiv = item.querySelector('.edit-form');
                        
                        if (formDiv) {
                            const idInput = formDiv.querySelector('.id-input');
                            const titleInput = formDiv.querySelector('input[type="text"]');
                            const textarea = formDiv.querySelector('textarea');
                            const h4 = item.querySelector('h4');
                            const p = textDiv.querySelector('p');
                            
                            // ì…ë ¥ëœ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸
                            const itemId = item.getAttribute('data-id');
                            h4.textContent = `${itemId}. ${titleInput.value}`;
                            p.textContent = textarea.value;
                            
                            textDiv.style.display = 'block';
                            formDiv.style.display = 'none';
                        }
                    }
                });
                
                // Firebaseì— ë””ìŠ¤í¬ë¦½ì…˜ ì €ì¥
                await saveDescriptionsToFirebase();
                
                // ì €ì¥ í›„ ì •ë ¬ ì‹¤í–‰
                sortHtmlDescriptions();
                
                // ì €ì¥ ì™„ë£Œ ì•Œë¦¼
                alert('ë””ìŠ¤í¬ë¦½ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // í¸ì§‘ ëª¨ë“œì—ì„œ ESC í‚¤ë¡œ ì·¨ì†Œ
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && isEditMode) {
                // í¸ì§‘ ëª¨ë“œ ì·¨ì†Œ
                const editBtn = document.getElementById('editDescriptionBtn');
                const descriptionItems = document.querySelectorAll('.description-item');
                
                isEditMode = false;
                editBtn.textContent = 'ìˆ˜ì •';
                editBtn.classList.remove('complete');
                
                descriptionItems.forEach(item => {
                    item.classList.remove('edit-mode');
                    const textDiv = item.querySelector('.description-text');
                    const formDiv = item.querySelector('.edit-form');
                    
                    textDiv.style.display = 'block';
                    formDiv.style.display = 'none';
                });
            }
        });

        // ì‚¬ì´ë“œë°” ë©”ë‰´ í† ê¸€ í•¨ìˆ˜
        function toggleSubmenu(element) {
            const menuItem = element.parentElement;
            const submenu = menuItem.querySelector('.submenu');
            
            // ë‹¤ë¥¸ ë©”ë‰´ë“¤ì˜ ì„œë¸Œë©”ë‰´ ë‹«ê¸°
            document.querySelectorAll('.submenu').forEach(sub => {
                if (sub !== submenu) {
                    sub.classList.remove('show');
                }
            });
            
            // ë‹¤ë¥¸ ë©”ë‰´ë“¤ì˜ active í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.menu-item').forEach(item => {
                if (item !== menuItem) {
                    item.classList.remove('active');
                }
            });
            
            // í˜„ì¬ ë©”ë‰´ í† ê¸€
            if (submenu.classList.contains('show')) {
                submenu.classList.remove('show');
                menuItem.classList.remove('active');
            } else {
                submenu.classList.add('show');
                menuItem.classList.add('active');
            }
        }

        // ì›í˜• ìˆ«ì ë”±ì§€ ê´€ë ¨ ë³€ìˆ˜
        let draggedBadge = null;
        let badgePositions = {};

        // ë””ìŠ¤í¬ë¦½ì…˜ê³¼ ë§¤ì¹­ë˜ëŠ” ì›í˜• ë”±ì§€ ìƒì„±
        function createBadgeToolbar(descriptions) {
            const badgeToolbar = document.getElementById('badgeToolbar');
            if (!badgeToolbar) return;

            badgeToolbar.innerHTML = '';

            descriptions.forEach(desc => {
                const badge = document.createElement('div');
                badge.className = 'number-badge';
                badge.textContent = desc.id;
                badge.setAttribute('data-id', desc.id);
                badge.setAttribute('draggable', 'true');
                
                // ë“œë˜ê·¸ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                badge.addEventListener('dragstart', handleDragStart);
                badge.addEventListener('dragend', handleDragEnd);
                
                badgeToolbar.appendChild(badge);
            });
        }

        // íŠ¹ì • IDì˜ ë”±ì§€ë¥¼ íˆ´ë°”ì— ì¶”ê°€
        function addBadgeToToolbar(badgeId) {
            const badgeToolbar = document.getElementById('badgeToolbar');
            if (!badgeToolbar) return;

            // ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
            const existingBadge = badgeToolbar.querySelector(`[data-id="${badgeId}"]`);
            if (existingBadge) return;

            const badge = document.createElement('div');
            badge.className = 'number-badge';
            badge.textContent = badgeId;
            badge.setAttribute('data-id', badgeId);
            badge.setAttribute('draggable', 'true');
            
            // ë“œë˜ê·¸ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            badge.addEventListener('dragstart', handleDragStart);
            badge.addEventListener('dragend', handleDragEnd);
            
            badgeToolbar.appendChild(badge);
            console.log(`ë”±ì§€ ${badgeId}ê°€ íˆ´ë°”ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }

        // íŠ¹ì • IDì˜ ë”±ì§€ë¥¼ íˆ´ë°”ì—ì„œ ì œê±°
        function removeBadgeFromToolbar(badgeId) {
            const badgeToolbar = document.getElementById('badgeToolbar');
            if (!badgeToolbar) return;

            const badge = badgeToolbar.querySelector(`[data-id="${badgeId}"]`);
            if (badge) {
                badge.remove();
                console.log(`ë”±ì§€ ${badgeId}ê°€ íˆ´ë°”ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.`);
            }
        }

        // íŠ¹ì • IDì˜ ë”±ì§€ë¥¼ ë“œë˜ê·¸ ì˜ì—­ì—ì„œ ì œê±°
        function removeBadgeFromContainer(badgeId) {
            const badgeContainer = document.getElementById('badgeContainer');
            if (!badgeContainer) return;

            const badge = badgeContainer.querySelector(`[data-id="${badgeId}"]`);
            if (badge) {
                badge.remove();
                console.log(`ë”±ì§€ ${badgeId}ê°€ ë“œë˜ê·¸ ì˜ì—­ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.`);
            }
        }

        // ë“œë˜ê·¸ ì‹œì‘
        function handleDragStart(e) {
            draggedBadge = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', e.target.outerHTML);
        }

        // ë“œë˜ê·¸ ì¢…ë£Œ
        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            draggedBadge = null;
        }

        // ë“œë˜ê·¸ ê°€ëŠ¥í•œ ì˜ì—­ì— ë“œë¡­ ì´ë²¤íŠ¸ ì¶”ê°€
        function setupDropZone() {
            const badgeContainer = document.getElementById('badgeContainer');
            if (!badgeContainer) return;

            badgeContainer.addEventListener('dragover', handleDragOver);
            badgeContainer.addEventListener('drop', handleDrop);
            badgeContainer.addEventListener('dragenter', handleDragEnter);
            badgeContainer.addEventListener('dragleave', handleDragLeave);
        }

        // ë“œë˜ê·¸ ì˜¤ë²„
        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }

        // ë“œë˜ê·¸ ì—”í„°
        function handleDragEnter(e) {
            e.preventDefault();
            e.target.classList.add('drag-over');
        }

        // ë“œë˜ê·¸ ë¦¬ë¸Œ
        function handleDragLeave(e) {
            e.target.classList.remove('drag-over');
        }

        // ë“œë¡­ ì²˜ë¦¬
        function handleDrop(e) {
            e.preventDefault();
            e.target.classList.remove('drag-over');
            
            if (!draggedBadge) return;

            const rect = e.target.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // ìƒˆë¡œìš´ ë”±ì§€ ìƒì„±
            const newBadge = document.createElement('div');
            newBadge.className = 'number-badge';
            newBadge.textContent = draggedBadge.textContent;
            newBadge.setAttribute('data-id', draggedBadge.getAttribute('data-id'));
            newBadge.style.left = x + 'px';
            newBadge.style.top = y + 'px';
            newBadge.style.position = 'absolute';

            // í´ë¦­ ì´ë²¤íŠ¸ë¡œ ìœ„ì¹˜ ì¡°ì • ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •
            newBadge.addEventListener('click', function() {
                this.style.cursor = 'move';
            });

            // ë§ˆìš°ìŠ¤ ë‹¤ìš´ìœ¼ë¡œ ë“œë˜ê·¸ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •
            newBadge.addEventListener('mousedown', handleMouseDown);

            // ì»¨í…Œì´ë„ˆì— ì¶”ê°€
            e.target.appendChild(newBadge);

            // ìœ„ì¹˜ ì €ì¥
            const badgeId = draggedBadge.getAttribute('data-id');
            badgePositions[badgeId] = { x: x, y: y };
            
            // Firebaseì— ìœ„ì¹˜ ì €ì¥
            saveBadgePositionToFirebase(badgeId, x, y);
        }

        // ë§ˆìš°ìŠ¤ ë‹¤ìš´ìœ¼ë¡œ ë“œë˜ê·¸ ì‹œì‘
        function handleMouseDown(e) {
            const badge = e.target;
            const startX = e.clientX - badge.offsetLeft;
            const startY = e.clientY - badge.offsetTop;

            function handleMouseMove(e) {
                const x = e.clientX - startX;
                const y = e.clientY - startY;
                
                badge.style.left = x + 'px';
                badge.style.top = y + 'px';
            }

            function handleMouseUp(e) {
                const x = e.clientX - startX;
                const y = e.clientY - startY;
                
                // ìœ„ì¹˜ ì €ì¥
                const badgeId = badge.getAttribute('data-id');
                badgePositions[badgeId] = { x: x, y: y };
                
                // Firebaseì— ìœ„ì¹˜ ì €ì¥
                saveBadgePositionToFirebase(badgeId, x, y);
                
                document.removeEventListener('mousemove', handleMouseMove);
                document.removeEventListener('mouseup', handleMouseUp);
            }

            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', handleMouseUp);
        }

        // Firebaseì— ë”±ì§€ ìœ„ì¹˜ ì €ì¥
        async function saveBadgePositionToFirebase(badgeId, x, y) {
            try {
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }

                const { collection, addDoc, updateDoc, doc, getDocs, query, where, limit } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                // badge_positions ì»¬ë ‰ì…˜ì—ì„œ í•´ë‹¹ í˜ì´ì§€ì˜ ìœ„ì¹˜ ì •ë³´ ì°¾ê¸°
                const q = query(
                    collection(window.firebaseDb, 'badge_positions'),
                    where('page', '==', 'media_list_admin'),
                    limit(1)
                );
                
                const querySnapshot = await getDocs(q);
                
                if (!querySnapshot.empty) {
                    // ê¸°ì¡´ ë¬¸ì„œ ì—…ë°ì´íŠ¸
                    const docSnapshot = querySnapshot.docs[0];
                    const currentData = docSnapshot.data();
                    const positions = currentData.positions || {};
                    positions[badgeId] = { x: x, y: y };
                    
                    await updateDoc(doc(window.firebaseDb, 'badge_positions', docSnapshot.id), {
                        positions: positions,
                        updatedAt: new Date(),
                        updatedBy: 'admin'
                    });
                    console.log('ë”±ì§€ ìœ„ì¹˜ê°€ Firebaseì—ì„œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
                } else {
                    // ìƒˆ ë¬¸ì„œ ìƒì„±
                    const positions = {};
                    positions[badgeId] = { x: x, y: y };
                    
                    await addDoc(collection(window.firebaseDb, 'badge_positions'), {
                        page: 'media_list_admin',
                        positions: positions,
                        createdAt: new Date(),
                        updatedAt: new Date(),
                        updatedBy: 'admin'
                    });
                    console.log('ë”±ì§€ ìœ„ì¹˜ê°€ Firebaseì— ìƒˆë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('Firebase ìœ„ì¹˜ ì €ì¥ ì˜¤ë¥˜:', error);
            }
        }

        // Firebaseì—ì„œ ë”±ì§€ ìœ„ì¹˜ ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadBadgePositionsFromFirebase() {
            try {
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }

                const { collection, getDocs, query, where, limit } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                const q = query(
                    collection(window.firebaseDb, 'badge_positions'),
                    where('page', '==', 'media_list_admin'),
                    limit(1)
                );
                
                const querySnapshot = await getDocs(q);
                
                if (!querySnapshot.empty) {
                    const docSnapshot = querySnapshot.docs[0];
                    const data = docSnapshot.data();
                    console.log('Firebaseì—ì„œ ë”±ì§€ ìœ„ì¹˜ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤:', data.positions);
                    return data.positions || {};
                } else {
                    console.log('ì €ì¥ëœ ë”±ì§€ ìœ„ì¹˜ê°€ ì—†ìŠµë‹ˆë‹¤.');
                    return {};
                }
            } catch (error) {
                console.error('Firebase ìœ„ì¹˜ ë¡œë“œ ì˜¤ë¥˜:', error);
                return {};
            }
        }

        // ì €ì¥ëœ ìœ„ì¹˜ë¡œ ë”±ì§€ ë³µì›
        function restoreBadgePositions(positions) {
            const badgeContainer = document.getElementById('badgeContainer');
            if (!badgeContainer) return;

            Object.keys(positions).forEach(badgeId => {
                const position = positions[badgeId];
                const badge = document.createElement('div');
                badge.className = 'number-badge';
                badge.textContent = badgeId;
                badge.setAttribute('data-id', badgeId);
                badge.style.left = position.x + 'px';
                badge.style.top = position.y + 'px';
                badge.style.position = 'absolute';

                // ë§ˆìš°ìŠ¤ ë‹¤ìš´ìœ¼ë¡œ ë“œë˜ê·¸ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •
                badge.addEventListener('mousedown', handleMouseDown);

                badgeContainer.appendChild(badge);
            });
        }

        // ëª¨ë“  ë””ìŠ¤í¬ë¦½ì…˜ ë°ì´í„° ì‚­ì œ í•¨ìˆ˜ (ìˆ˜ë™ ì‹¤í–‰ìš©)
        async function deleteAllDescriptions() {
            try {
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }

                const { collection, getDocs, deleteDoc, doc, query, where } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                // list_description ì»¬ë ‰ì…˜ì—ì„œ í•´ë‹¹ í˜ì´ì§€ì˜ ëª¨ë“  ë¬¸ì„œ ì‚­ì œ
                const q = query(
                    collection(window.firebaseDb, 'list_description'),
                    where('page', '==', 'media_list_admin')
                );
                
                const querySnapshot = await getDocs(q);
                
                for (const docSnapshot of querySnapshot.docs) {
                    await deleteDoc(doc(window.firebaseDb, 'list_description', docSnapshot.id));
                    console.log('ë””ìŠ¤í¬ë¦½ì…˜ ë¬¸ì„œ ì‚­ì œë¨:', docSnapshot.id);
                }
                
                // badge_positions ì»¬ë ‰ì…˜ì—ì„œë„ í•´ë‹¹ í˜ì´ì§€ì˜ ìœ„ì¹˜ ì •ë³´ ì‚­ì œ
                const badgeQ = query(
                    collection(window.firebaseDb, 'badge_positions'),
                    where('page', '==', 'media_list_admin')
                );
                
                const badgeQuerySnapshot = await getDocs(badgeQ);
                
                for (const docSnapshot of badgeQuerySnapshot.docs) {
                    await deleteDoc(doc(window.firebaseDb, 'badge_positions', docSnapshot.id));
                    console.log('ë”±ì§€ ìœ„ì¹˜ ë¬¸ì„œ ì‚­ì œë¨:', docSnapshot.id);
                }
                
                console.log('ëª¨ë“  ë””ìŠ¤í¬ë¦½ì…˜ ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                return true;
            } catch (error) {
                console.error('ë””ìŠ¤í¬ë¦½ì…˜ ì‚­ì œ ì˜¤ë¥˜:', error);
                throw error;
            }
        }

        // Firebaseì— list_description ì»¬ë ‰ì…˜ ìƒì„± ë° ì´ˆê¸° ë°ì´í„° ì €ì¥
        async function initializeListDescriptionCollection() {
            try {
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }

                const { collection, addDoc, getDocs, query, where, limit } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                // ê¸°ì¡´ ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸
                const q = query(
                    collection(window.firebaseDb, 'list_description'),
                    where('page', '==', 'media_list_admin'),
                    limit(1)
                );
                
                const querySnapshot = await getDocs(q);
                
                if (querySnapshot.empty) {
                    // ì´ˆê¸° ë°ì´í„° ìƒì„±
                    const initialDescriptions = [
                        {
                            id: "1",
                            title: "1. ê²€ìƒ‰ ê¸°ëŠ¥",
                            content: "ë‚ ì§œ, ì–¸ì–´, ì¹´í…Œê³ ë¦¬ë³„ë¡œ ê²Œì‹œê¸€ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                            page: "media_list_admin"
                        },
                        {
                            id: "2", 
                            title: "2. ê²Œì‹œê¸€ ëª©ë¡",
                            content: "ë“±ë¡ëœ ë³´ë„ìë£Œ ëª©ë¡ì„ ìµœì‹  ë“±ë¡ìˆœìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                            page: "media_list_admin"
                        },
                        {
                            id: "3",
                            title: "3. ë””ìŠ¤í¬ë¦½ì…˜ ê´€ë¦¬",
                            content: "ì˜¤ë¥¸ìª½ íŒ¨ë„ì—ì„œ ì„¤ëª… í•­ëª©ì„ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                            page: "media_list_admin"
                        }
                    ];
                    
                    await addDoc(collection(window.firebaseDb, 'list_description'), {
                        page: 'media_list_admin',
                        descriptions: initialDescriptions,
                        createdAt: new Date(),
                        updatedAt: new Date(),
                        updatedBy: 'admin'
                    });
                    
                    console.log('list_description ì»¬ë ‰ì…˜ì´ ìƒì„±ë˜ê³  ì´ˆê¸° ë°ì´í„°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    return initialDescriptions;
                } else {
                    console.log('list_description ì»¬ë ‰ì…˜ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤.');
                    return null;
                }
            } catch (error) {
                console.error('list_description ì»¬ë ‰ì…˜ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                throw error;
            }
        }
    </script>
</body>
</html>
