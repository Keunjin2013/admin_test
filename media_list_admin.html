<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¯¸ë””ì–´ ê´€ë¦¬ > ë³´ë„ìë£Œ > ëª©ë¡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            gap: 20px;
        }

        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            flex: 1;
            margin-top: 120px;
        }

        /* í…Œì´ë¸”ê³¼ í˜ì´ì§€ë„¤ì´ì…˜ì„ ë¬¶ì€ êµ¬ì—­ */
        .table-pagination-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            margin-top: 120px;
        }

        /* í—¤ë” */
        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 14px;
            color: #666;
        }

        .header-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        /* ê²€ìƒ‰/í•„í„° ì˜ì—­ */
        .search-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .search-form {
            display: flex;
            gap: 15px;
            align-items: end;
            flex-wrap: wrap;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .form-group label {
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }

        .form-control {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            min-width: 120px;
        }

        .form-control:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }

        .date-range {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-input-group {
            display: flex;
            gap: 5px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background-color: #0056b3;
        }

        /* í…Œì´ë¸” ì˜ì—­ */
        .table-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
            flex: 1;
            margin-top: 120px;
        }

        .table-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background-color: #f8f9fa;
            padding: 12px 8px;
            text-align: center;
            font-weight: 600;
            color: #333;
            border-bottom: 2px solid #dee2e6;
            font-size: 14px;
        }

        .data-table td {
            padding: 12px 8px;
            text-align: center;
            border-bottom: 1px solid #dee2e6;
            font-size: 14px;
        }

        .data-table tbody tr:hover {
            background-color: #f8f9fa;
        }

        .data-table tbody tr.disabled {
            background-color: #f5f5f5;
            color: #999;
        }

        .title-link {
            color: #007bff;
            text-decoration: underline;
            cursor: pointer;
        }

        .title-link:hover {
            color: #0056b3;
        }

        /* í˜ì´ì§€ë„¤ì´ì…˜ */
        .pagination-section {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 20px;
            position: relative;
        }

        .register-button {
            position: absolute;
            right: 20px;
        }

        .pagination {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .pagination button {
            padding: 8px 12px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 4px;
            font-size: 14px;
        }

        .pagination button:hover {
            background-color: #f8f9fa;
        }

        .pagination button.active {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ì„¤ëª… íŒ¨ë„ */
        .description-panel {
            width: 300px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            height: fit-content;
            margin-top: 240px;
            position: sticky;
            top: 140px;
        }

        .description-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .description-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin: 0;
        }

        .edit-button {
            padding: 6px 12px;
            border: 1px solid #007bff;
            background: white;
            color: #007bff;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .edit-button:hover {
            background-color: #007bff;
            color: white;
        }

        .edit-button.complete {
            background-color: #28a745;
            border-color: #28a745;
            color: white;
        }

        .edit-button.complete:hover {
            background-color: #218838;
        }

        .description-item {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
            border-left: 4px solid #007bff;
        }

        .description-item h4 {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .description-item p {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }

        /* í¸ì§‘ ëª¨ë“œ ìŠ¤íƒ€ì¼ */
        .description-item.edit-mode {
            background: #fff3cd;
            border-left-color: #ffc107;
        }

        .description-item.edit-mode h4 {
            color: #856404;
        }

        .edit-form {
            display: none;
        }

        .edit-form.active {
            display: block;
        }

        .edit-form input,
        .edit-form textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            margin-bottom: 8px;
            font-family: inherit;
        }

        .edit-form textarea {
            resize: vertical;
            min-height: 60px;
        }

        .edit-form input:focus,
        .edit-form textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }

        .description-text {
            display: block;
        }

        .description-text.hidden {
            display: none;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 1200px) {
            .container {
                flex-direction: column;
            }
            
            .table-pagination-section {
                margin-top: 20px;
            }
            
            .description-panel {
                width: 100%;
                margin-top: 20px;
                position: static;
            }
            
            .search-form {
                flex-direction: column;
                align-items: stretch;
            }
            
            .form-group {
                width: 100%;
            }
            
            .form-control {
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .data-table {
                font-size: 12px;
            }
            
            .data-table th,
            .data-table td {
                padding: 8px 4px;
            }
            
            .pagination-section {
                flex-direction: column;
                gap: 15px;
            }
            
            .register-button {
                position: static;
                align-self: flex-end;
            }
        }

        /* ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ í…Œì´ë¸” */
        .table-container {
            overflow-x: auto;
        }

        /* ìƒíƒœ í‘œì‹œ */
        .status-y {
            color: #28a745;
            font-weight: bold;
        }

        .status-n {
            color: #dc3545;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <div class="header-top">
                <div>ê´€ë¦¬ì í˜ì´ì§€</div>
                <div>Writer: Keunjin2013 | Date / Version: 2025 | page 1</div>
            </div>
            <div class="header-title">ë¯¸ë””ì–´ ê´€ë¦¬ > ë³´ë„ìë£Œ > ëª©ë¡</div>
            <!-- ê²€ìƒ‰/í•„í„° ì˜ì—­ -->
            <div class="search-section">
                <form class="search-form">
                    <div class="form-group">
                        <label>ë‚ ì§œ</label>
                        <div class="date-range">
                            <input type="date" class="form-control" id="startDate">
                            <span>~</span>
                            <input type="date" class="form-control" id="endDate">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>ì–¸ì–´</label>
                        <select class="form-control" id="language">
                            <option value="">ì „ì²´</option>
                            <option value="KR">KR</option>
                            <option value="EN">EN</option>
                            <option value="CN">CN</option>
                            <option value="JP">JP</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>ì¹´í…Œê³ ë¦¬</label>
                        <select class="form-control" id="category">
                            <option value="">ì „ì²´</option>
                            <option value="ê¸°ì—…">ê¸°ì—…</option>
                            <option value="ê¸°ìˆ ">ê¸°ìˆ </option>
                            <option value="ESG">ESG</option>
                            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>ê²€ìƒ‰</label>
                        <div class="search-input-group">
                            <select class="form-control" id="searchType" style="min-width: 80px;">
                                <option value="all">ì „ì²´</option>
                                <option value="title">ì œëª©</option>
                                <option value="content">ë‚´ìš©</option>
                            </select>
                            <input type="text" class="form-control" id="searchKeyword" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" style="min-width: 200px;">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button type="button" class="btn btn-primary" onclick="searchPress()">ê²€ìƒ‰</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- í…Œì´ë¸”ê³¼ í˜ì´ì§€ë„¤ì´ì…˜ì„ ë¬¶ì€ êµ¬ì—­ -->
        <div class="table-pagination-section">
            <!-- í…Œì´ë¸” ì˜ì—­ -->
            <div class="table-section">
                <div class="table-header">
                    <div class="table-title">ê²Œì‹œë¬¼ ëª©ë¡ (ìµœì‹  ë“±ë¡ìˆœ)</div>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th style="width: 60px;">ë²ˆí˜¸</th>
                                <th style="width: 60px;">ì–¸ì–´</th>
                                <th style="width: 80px;">ì¹´í…Œê³ ë¦¬</th>
                                <th style="width: 300px;">ì œëª©</th>
                                <th style="width: 80px;">ì‘ì„±ì</th>
                                <th style="width: 80px;">ì¡°íšŒìˆ˜</th>
                                <th style="width: 80px;">ìƒìœ„ë…¸ì¶œ</th>
                                <th style="width: 80px;">ë…¸ì¶œì—¬ë¶€</th>
                                <th style="width: 120px;">ë°œí–‰ì¼ì‹œ</th>
                                <th style="width: 120px;">ë“±ë¡ì¼ì‹œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>15</td>
                                <td>KR</td>
                                <td>ê¸°ì—…</td>
                                <td><span class="title-link" onclick="viewDetail(15)">DBí•˜ì´í…, 2024ë…„ ë§¤ì¶œì•¡ 1ì¡° 1,310ì–µì›, ì˜ì—…ì´ìµ 1,950ì–µì›</span></td>
                                <td>ê´€*ì</td>
                                <td>1212</td>
                                <td><span class="status-y">Y</span></td>
                                <td><span class="status-y">Y</span></td>
                                <td>2024-05-20 17:00</td>
                                <td>2024-05-19 17:00</td>
                            </tr>
                            <tr>
                                <td>14</td>
                                <td>EN</td>
                                <td>ê¸°ìˆ </td>
                                <td><span class="title-link" onclick="viewDetail(14)">Samsung Electronics Announces New AI Chip Technology</span></td>
                                <td>ê´€*ì</td>
                                <td>856</td>
                                <td><span class="status-n">N</span></td>
                                <td><span class="status-y">Y</span></td>
                                <td>2024-05-19 14:30</td>
                                <td>2024-05-18 14:30</td>
                            </tr>
                            <tr>
                                <td>13</td>
                                <td>KR</td>
                                <td>ESG</td>
                                <td><span class="title-link" onclick="viewDetail(13)">ì‚¼ì„±ì „ì, ì§€ì†ê°€ëŠ¥ê²½ì˜ ë³´ê³ ì„œ ë°œê°„</span></td>
                                <td>ê´€*ì</td>
                                <td>743</td>
                                <td><span class="status-y">Y</span></td>
                                <td><span class="status-y">Y</span></td>
                                <td>2024-05-18 11:00</td>
                                <td>2024-05-17 11:00</td>
                            </tr>
                            <tr class="disabled">
                                <td>12</td>
                                <td>CN</td>
                                <td>ê¸°íƒ€</td>
                                <td><span class="title-link" onclick="viewDetail(12)">ä¸‰æ˜Ÿç”µå­å‘å¸ƒ2024å¹´ç¬¬ä¸€å­£åº¦è´¢æŠ¥</span></td>
                                <td>ê´€*ì</td>
                                <td>432</td>
                                <td><span class="status-n">N</span></td>
                                <td><span class="status-n">N</span></td>
                                <td>2024-05-17 09:00</td>
                                <td>2024-05-16 09:00</td>
                            </tr>
                            <tr>
                                <td>11</td>
                                <td>JP</td>
                                <td>ê¸°ì—…</td>
                                <td><span class="title-link" onclick="viewDetail(11)">ã‚µãƒ ã‚¹ãƒ³é›»å­ã€2024å¹´ç¬¬1å››åŠæœŸæ±ºç®—ç™ºè¡¨</span></td>
                                <td>ê´€*ì</td>
                                <td>298</td>
                                <td><span class="status-n">N</span></td>
                                <td><span class="status-y">Y</span></td>
                                <td>2024-05-16 16:00</td>
                                <td>2024-05-15 16:00</td>
                            </tr>
                            <tr>
                                <td>10</td>
                                <td>KR</td>
                                <td>ê¸°ìˆ </td>
                                <td><span class="title-link" onclick="viewDetail(10)">SKí•˜ì´ë‹‰ìŠ¤, ì°¨ì„¸ëŒ€ ë©”ëª¨ë¦¬ ê¸°ìˆ  ê°œë°œ ì„±ê³¼ ë°œí‘œ</span></td>
                                <td>ê´€*ì</td>
                                <td>567</td>
                                <td><span class="status-y">Y</span></td>
                                <td><span class="status-y">Y</span></td>
                                <td>2024-05-15 13:00</td>
                                <td>2024-05-14 13:00</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë° ë“±ë¡ ë²„íŠ¼ -->
            <div class="pagination-section">
                <div class="pagination">
                    <button onclick="goToPage('first')" title="ì²« í˜ì´ì§€"><<</button>
                    <button onclick="goToPage('prev')" title="ì´ì „ í˜ì´ì§€"><</button>
                    <button class="active" onclick="goToPage(1)">1</button>
                    <button onclick="goToPage(2)">2</button>
                    <button onclick="goToPage(3)">3</button>
                    <button onclick="goToPage(4)">4</button>
                    <button onclick="goToPage(5)">5</button>
                    <button onclick="goToPage(6)">6</button>
                    <button onclick="goToPage(7)">7</button>
                    <button onclick="goToPage(8)">8</button>
                    <button onclick="goToPage(9)">9</button>
                    <button onclick="goToPage(10)">10</button>
                    <button onclick="goToPage('next')" title="ë‹¤ìŒ í˜ì´ì§€">></button>
                    <button onclick="goToPage('last')" title="ë§ˆì§€ë§‰ í˜ì´ì§€">>></button>
                </div>
                
                <button class="btn btn-primary register-button" onclick="registerNew()">ë“±ë¡</button>
            </div>
        </div>

        <!-- ì„¤ëª… íŒ¨ë„ -->
        <div class="description-panel">
            <div class="description-header">
                <div class="description-title">Description</div>
                <div style="display: flex; gap: 8px;">
                    <button class="edit-button" id="editDescriptionBtn" onclick="toggleEditMode()">ìˆ˜ì •</button>
                    <button class="edit-button" onclick="testFirebaseConnection()" style="background-color: #28a745; border-color: #28a745; color: white;">Firebase í…ŒìŠ¤íŠ¸</button>
                </div>
            </div>
            
            <div class="description-item" data-id="1">
                <h4>1. ê²Œì‹œë¬¼ ëª©ë¡</h4>
                <div class="description-text">
                    <p>- ì •ë ¬ ê¸°ì¤€ì€ "ìµœì‹  ë“±ë¡ìˆœ"ì…ë‹ˆë‹¤.</p>
                </div>
                <div class="edit-form">
                    <input type="text" value="ê²Œì‹œë¬¼ ëª©ë¡" placeholder="ì œëª©">
                    <textarea placeholder="ì„¤ëª…">- ì •ë ¬ ê¸°ì¤€ì€ "ìµœì‹  ë“±ë¡ìˆœ"ì…ë‹ˆë‹¤.</textarea>
                </div>
            </div>
            
            <div class="description-item" data-id="2">
                <h4>2. ì–¸ì–´</h4>
                <div class="description-text">
                    <p>- "KR, EN, CN, JP"ë¥¼ ì§€ì›í•˜ë©°, ê²Œì‹œë¬¼ ë“±ë¡ ì‹œ ì„ íƒí•œ ì–¸ì–´ê°€ ë…¸ì¶œë©ë‹ˆë‹¤.</p>
                </div>
                <div class="edit-form">
                    <input type="text" value="ì–¸ì–´" placeholder="ì œëª©">
                    <textarea placeholder="ì„¤ëª…">- "KR, EN, CN, JP"ë¥¼ ì§€ì›í•˜ë©°, ê²Œì‹œë¬¼ ë“±ë¡ ì‹œ ì„ íƒí•œ ì–¸ì–´ê°€ ë…¸ì¶œë©ë‹ˆë‹¤.</textarea>
                </div>
            </div>
            
            <div class="description-item" data-id="3">
                <h4>3. ì¹´í…Œê³ ë¦¬</h4>
                <div class="description-text">
                    <p>- "ê¸°ì—…, ê¸°ìˆ , ESG, ê¸°íƒ€" ì¹´í…Œê³ ë¦¬ê°€ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
                <div class="edit-form">
                    <input type="text" value="ì¹´í…Œê³ ë¦¬" placeholder="ì œëª©">
                    <textarea placeholder="ì„¤ëª…">- "ê¸°ì—…, ê¸°ìˆ , ESG, ê¸°íƒ€" ì¹´í…Œê³ ë¦¬ê°€ ìˆìŠµë‹ˆë‹¤.</textarea>
                </div>
            </div>
            
            <div class="description-item" data-id="4">
                <h4>4. ì œëª©</h4>
                <div class="description-text">
                    <p>- í´ë¦­ ì‹œ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
                </div>
                <div class="edit-form">
                    <input type="text" value="ì œëª©" placeholder="ì œëª©">
                    <textarea placeholder="ì„¤ëª…">- í´ë¦­ ì‹œ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</textarea>
                </div>
            </div>
            
            <div class="description-item" data-id="5">
                <h4>5. ë‚ ì§œ</h4>
                <div class="description-text">
                    <p>- ë…„, ì›”, ì¼ ì„ íƒì´ ê°€ëŠ¥í•˜ë©° ë°œí–‰ì¼ì‹œë¡œ ê²€ìƒ‰í•©ë‹ˆë‹¤.</p>
                </div>
                <div class="edit-form">
                    <input type="text" value="ë‚ ì§œ" placeholder="ì œëª©">
                    <textarea placeholder="ì„¤ëª…">- ë…„, ì›”, ì¼ ì„ íƒì´ ê°€ëŠ¥í•˜ë©° ë°œí–‰ì¼ì‹œë¡œ ê²€ìƒ‰í•©ë‹ˆë‹¤.</textarea>
                </div>
            </div>
            
            <div class="description-item" data-id="6">
                <h4>6. ì–¸ì–´</h4>
                <div class="description-text">
                    <p>- ê²€ìƒ‰ í•„í„°ì˜ ì–¸ì–´ ë“œë¡­ë‹¤ìš´ ì˜µì…˜ì…ë‹ˆë‹¤.</p>
                </div>
                <div class="edit-form">
                    <input type="text" value="ì–¸ì–´" placeholder="ì œëª©">
                    <textarea placeholder="ì„¤ëª…">- ê²€ìƒ‰ í•„í„°ì˜ ì–¸ì–´ ë“œë¡­ë‹¤ìš´ ì˜µì…˜ì…ë‹ˆë‹¤.</textarea>
                </div>
            </div>
            
            <div class="description-item" data-id="7">
                <h4>7. ì¹´í…Œê³ ë¦¬</h4>
                <div class="description-text">
                    <p>- ê²€ìƒ‰ í•„í„°ì˜ ì¹´í…Œê³ ë¦¬ ë“œë¡­ë‹¤ìš´ ì˜µì…˜ì…ë‹ˆë‹¤.</p>
                </div>
                <div class="edit-form">
                    <input type="text" value="ì¹´í…Œê³ ë¦¬" placeholder="ì œëª©">
                    <textarea placeholder="ì„¤ëª…">- ê²€ìƒ‰ í•„í„°ì˜ ì¹´í…Œê³ ë¦¬ ë“œë¡­ë‹¤ìš´ ì˜µì…˜ì…ë‹ˆë‹¤.</textarea>
                </div>
            </div>
            
            <div class="description-item" data-id="8">
                <h4>8. ì…€ë ‰íŠ¸ ë°•ìŠ¤</h4>
                <div class="description-text">
                    <p>- ê²€ìƒ‰ í•„ë“œì˜ ê²€ìƒ‰ ëŒ€ìƒ (ì „ì²´, ì œëª©, ë‚´ìš©)ì„ ì„ íƒí•˜ëŠ” ë“œë¡­ë‹¤ìš´ì…ë‹ˆë‹¤.</p>
                </div>
                <div class="edit-form">
                    <input type="text" value="ì…€ë ‰íŠ¸ ë°•ìŠ¤" placeholder="ì œëª©">
                    <textarea placeholder="ì„¤ëª…">- ê²€ìƒ‰ í•„ë“œì˜ ê²€ìƒ‰ ëŒ€ìƒ (ì „ì²´, ì œëª©, ë‚´ìš©)ì„ ì„ íƒí•˜ëŠ” ë“œë¡­ë‹¤ìš´ì…ë‹ˆë‹¤.</textarea>
                </div>
            </div>
            
            <div class="description-item" data-id="9">
                <h4>9. ì¸í’‹ ë°•ìŠ¤</h4>
                <div class="description-text">
                    <p>- ê²€ìƒ‰ í•„ë“œì˜ ê²€ìƒ‰ì–´ ì…ë ¥ ì˜ì—­ì´ë©°, And ê²€ìƒ‰ì„ ì§€ì›í•˜ê³  ê²€ìƒ‰ ê²°ê³¼ëŠ” ë§ˆìŠ¤í‚¹ë˜ì–´ ë…¸ì¶œë©ë‹ˆë‹¤.</p>
                </div>
                <div class="edit-form">
                    <input type="text" value="ì¸í’‹ ë°•ìŠ¤" placeholder="ì œëª©">
                    <textarea placeholder="ì„¤ëª…">- ê²€ìƒ‰ í•„ë“œì˜ ê²€ìƒ‰ì–´ ì…ë ¥ ì˜ì—­ì´ë©°, And ê²€ìƒ‰ì„ ì§€ì›í•˜ê³  ê²€ìƒ‰ ê²°ê³¼ëŠ” ë§ˆìŠ¤í‚¹ë˜ì–´ ë…¸ì¶œë©ë‹ˆë‹¤.</textarea>
                </div>
            </div>
            
            <div class="description-item" data-id="10">
                <h4>10. ë“±ë¡</h4>
                <div class="description-text">
                    <p>- í´ë¦­ ì‹œ ê²Œì‹œê¸€ ë“±ë¡ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
                </div>
                <div class="edit-form">
                    <input type="text" value="ë“±ë¡" placeholder="ì œëª©">
                    <textarea placeholder="ì„¤ëª…">- í´ë¦­ ì‹œ ê²Œì‹œê¸€ ë“±ë¡ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</textarea>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Firebase ì„¤ì • (ì‹¤ì œ í”„ë¡œì íŠ¸ ì„¤ì •ìœ¼ë¡œ êµì²´ í•„ìš”)
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getStorage } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';

        // Firebase ì„¤ì • ê°ì²´ (Firebase ì½˜ì†”ì—ì„œ ë³µì‚¬í•œ ê°’ìœ¼ë¡œ êµì²´)
        const firebaseConfig = {
            apiKey: "AIzaSyC-6ngOcL8-CTy7GtUtOQPOVsEUVjZ-j_w",
            authDomain: "uber-admin-test.firebaseapp.com",
            projectId: "uber-admin-test",
            storageBucket: "uber-admin-test.firebasestorage.app",
            messagingSenderId: "704623921868",
            appId: "1:704623921868:web:057b0ffe418c0b79ecd069"
        };

        // Firebase ì´ˆê¸°í™”
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // ì „ì—­ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •
        window.firebaseAuth = auth;
        window.firebaseDb = db;
        window.firebaseStorage = storage;

        console.log('Firebaseê°€ ì„±ê³µì ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
    </script>

    <script>
        // Firebase ì—°ê²° í™•ì¸
        function checkFirebaseConnection() {
            if (window.firebaseAuth && window.firebaseDb) {
                console.log('Firebase ì—°ê²° ìƒíƒœ: ì„±ê³µ');
                return true;
            } else {
                console.log('Firebase ì—°ê²° ìƒíƒœ: ì‹¤íŒ¨');
                return false;
            }
        }

        // ê²€ìƒ‰ ê¸°ëŠ¥
        function searchPress() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const language = document.getElementById('language').value;
            const category = document.getElementById('category').value;
            const searchType = document.getElementById('searchType').value;
            const searchKeyword = document.getElementById('searchKeyword').value;
            
            console.log('ê²€ìƒ‰ ì¡°ê±´:', {
                startDate,
                endDate,
                language,
                category,
                searchType,
                searchKeyword
            });
            
            // ì‹¤ì œ ê²€ìƒ‰ ë¡œì§ êµ¬í˜„
            alert('ê²€ìƒ‰ ê¸°ëŠ¥ì´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.\nê²€ìƒ‰ ê²°ê³¼ëŠ” ë§ˆìŠ¤í‚¹ë˜ì–´ ë…¸ì¶œë©ë‹ˆë‹¤.');
        }

        // ìƒì„¸ë³´ê¸°
        function viewDetail(id) {
            console.log('ìƒì„¸ë³´ê¸°:', id);
            alert(`ê²Œì‹œë¬¼ ${id}ë²ˆì˜ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.`);
        }

        // ìƒˆ ê²Œì‹œë¬¼ ë“±ë¡
        function registerNew() {
            console.log('ìƒˆ ê²Œì‹œë¬¼ ë“±ë¡');
            window.location.href = 'media_upload_admin.html';
        }

        // í˜ì´ì§€ë„¤ì´ì…˜
        function goToPage(page) {
            if (page === 'first') {
                page = 1;
            } else if (page === 'prev') {
                page = Math.max(1, getCurrentPage() - 1);
            } else if (page === 'next') {
                page = getCurrentPage() + 1;
            } else if (page === 'last') {
                page = 10; // ì‹¤ì œë¡œëŠ” ì´ í˜ì´ì§€ ìˆ˜ë¥¼ ê³„ì‚°í•´ì•¼ í•¨
            }
            
            console.log('í˜ì´ì§€ ì´ë™:', page);
            
            // í™œì„± í˜ì´ì§€ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.pagination button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const targetBtn = document.querySelector(`.pagination button[onclick="goToPage(${page})"]`);
            if (targetBtn) {
                targetBtn.classList.add('active');
            }
        }

        // í˜„ì¬ í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°
        function getCurrentPage() {
            const activeBtn = document.querySelector('.pagination button.active');
            if (activeBtn) {
                const onclick = activeBtn.getAttribute('onclick');
                const match = onclick.match(/goToPage\((\d+)\)/);
                return match ? parseInt(match[1]) : 1;
            }
            return 1;
        }

        // í…Œì´ë¸” í–‰ í´ë¦­ ì´ë²¤íŠ¸
        document.querySelectorAll('.data-table tbody tr').forEach(row => {
            row.addEventListener('click', function(e) {
                // ì œëª© ë§í¬ í´ë¦­ì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ
                if (!e.target.classList.contains('title-link')) {
                    console.log('í–‰ í´ë¦­:', this.cells[0].textContent);
                }
            });
        });

        // ë‚ ì§œ í•„ë“œ ì´ˆê¸°ê°’ ì„¤ì • (ìµœê·¼ 1ê°œì›”)
        function setDefaultDateRange() {
            const today = new Date();
            const oneMonthAgo = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate());
            
            document.getElementById('endDate').value = today.toISOString().split('T')[0];
            document.getElementById('startDate').value = oneMonthAgo.toISOString().split('T')[0];
        }

        // Firebase ë°ì´í„°ë² ì´ìŠ¤ í•¨ìˆ˜ë“¤
        async function saveDescriptionToFirebase(descriptionData) {
            try {
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }

                const { collection, addDoc, doc, setDoc } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                // descriptions ì»¬ë ‰ì…˜ì— ë°ì´í„° ì €ì¥
                const docRef = await addDoc(collection(window.firebaseDb, 'descriptions'), {
                    ...descriptionData,
                    timestamp: new Date(),
                    updatedBy: 'admin'
                });
                
                console.log('ë””ìŠ¤í¬ë¦½ì…˜ì´ Firebaseì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ID:', docRef.id);
                return docRef.id;
            } catch (error) {
                console.error('Firebase ì €ì¥ ì˜¤ë¥˜:', error);
                throw error;
            }
        }

        async function loadDescriptionsFromFirebase() {
            try {
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }

                const { collection, getDocs } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                const querySnapshot = await getDocs(collection(window.firebaseDb, 'descriptions'));
                const descriptions = [];
                
                querySnapshot.forEach((doc) => {
                    descriptions.push({
                        id: doc.id,
                        ...doc.data()
                    });
                });
                
                console.log('Firebaseì—ì„œ ë””ìŠ¤í¬ë¦½ì…˜ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤:', descriptions);
                return descriptions;
            } catch (error) {
                console.error('Firebase ë¡œë“œ ì˜¤ë¥˜:', error);
                throw error;
            }
        }

        // ë””ìŠ¤í¬ë¦½ì…˜ì„ Firebaseì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜
        async function saveDescriptionsToFirebase() {
            try {
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }

                const { collection, addDoc, serverTimestamp } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                // í˜„ì¬ ë””ìŠ¤í¬ë¦½ì…˜ ë°ì´í„° ìˆ˜ì§‘
                const descriptionItems = document.querySelectorAll('.description-item');
                const descriptions = [];
                
                descriptionItems.forEach(item => {
                    const itemId = item.getAttribute('data-id');
                    const h4 = item.querySelector('h4');
                    const p = item.querySelector('.description-text p');
                    
                    descriptions.push({
                        id: itemId,
                        title: h4.textContent,
                        content: p.textContent,
                        page: 'media_list_admin'
                    });
                });
                
                // Firebaseì— ì €ì¥
                const docRef = await addDoc(collection(window.firebaseDb, 'descriptions'), {
                    page: 'media_list_admin',
                    descriptions: descriptions,
                    updatedAt: serverTimestamp(),
                    updatedBy: 'admin'
                });
                
                console.log('ë””ìŠ¤í¬ë¦½ì…˜ì´ Firebaseì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ID:', docRef.id);
                return docRef.id;
            } catch (error) {
                console.error('Firebase ì €ì¥ ì˜¤ë¥˜:', error);
                throw error;
            }
        }

        // Firebaseì—ì„œ ê²Œì‹œê¸€ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadPressReleasesFromFirebase() {
            try {
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                }

                const { collection, getDocs, orderBy, query } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                // ìµœì‹  ë“±ë¡ìˆœìœ¼ë¡œ ì •ë ¬í•˜ì—¬ ë¶ˆëŸ¬ì˜¤ê¸°
                const q = query(collection(window.firebaseDb, 'pressReleases'), orderBy('createdAt', 'desc'));
                const querySnapshot = await getDocs(q);
                const pressReleases = [];
                
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    pressReleases.push({
                        id: doc.id,
                        ...data,
                        // ë‚ ì§œ í¬ë§·íŒ…
                        publicationDateTime: formatDateTime(data.publicationDate, data.publicationTime),
                        createdAt: data.createdAt ? data.createdAt.toDate() : new Date()
                    });
                });
                
                console.log('Firebaseì—ì„œ ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤:', pressReleases);
                return pressReleases;
            } catch (error) {
                console.error('ê²Œì‹œê¸€ ë¡œë“œ ì˜¤ë¥˜:', error);
                throw error;
            }
        }

        // ë‚ ì§œì™€ ì‹œê°„ì„ í¬ë§·íŒ…í•˜ëŠ” í•¨ìˆ˜
        function formatDateTime(date, time) {
            if (!date || !time) return '';
            const dateObj = new Date(date);
            const year = dateObj.getFullYear();
            const month = String(dateObj.getMonth() + 1).padStart(2, '0');
            const day = String(dateObj.getDate()).padStart(2, '0');
            const hour = String(time).padStart(2, '0');
            return `${year}-${month}-${day} ${hour}:00`;
        }

        // í…Œì´ë¸”ì— ê²Œì‹œê¸€ ë°ì´í„° í‘œì‹œ
        function displayPressReleases(pressReleases) {
            const tbody = document.querySelector('.data-table tbody');
            if (!tbody) return;

            tbody.innerHTML = '';

            pressReleases.forEach((item, index) => {
                const row = document.createElement('tr');
                
                // ë…¸ì¶œ ì—¬ë¶€ì— ë”°ë¼ ìŠ¤íƒ€ì¼ ì ìš©
                if (item.exposure === 'N') {
                    row.classList.add('disabled');
                }

                row.innerHTML = `
                    <td>${pressReleases.length - index}</td>
                    <td>${item.language}</td>
                    <td>${item.category}</td>
                    <td><span class="title-link" onclick="viewDetail('${item.id}')">${item.title}</span></td>
                    <td>${item.author}</td>
                    <td>${item.viewCount || 0}</td>
                    <td><span class="status-${item.topExposure === 'Y' ? 'y' : 'n'}">${item.topExposure}</span></td>
                    <td><span class="status-${item.exposure === 'Y' ? 'y' : 'n'}">${item.exposure}</span></td>
                    <td>${item.publicationDateTime}</td>
                    <td>${formatDateTime(item.createdAt)}</td>
                `;

                tbody.appendChild(row);
            });
        }

        // ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°
        function viewDetail(id) {
            console.log('ìƒì„¸ë³´ê¸°:', id);
            window.location.href = `media_detail_admin.html?id=${id}`;
        }

        // Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        async function testFirebaseConnection() {
            try {
                console.log('Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹œì‘...');
                
                // Firebase ì—°ê²° í™•ì¸
                if (!checkFirebaseConnection()) {
                    throw new Error('Firebase ì´ˆê¸°í™” ì‹¤íŒ¨');
                }
                
                // Firestore ì—°ê²° í…ŒìŠ¤íŠ¸
                const { collection, addDoc, getDocs, deleteDoc, doc } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                
                // í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¶”ê°€
                const testData = {
                    message: 'Firebase ì—°ê²° í…ŒìŠ¤íŠ¸',
                    timestamp: new Date(),
                    testId: Math.random().toString(36).substr(2, 9)
                };
                
                console.log('í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¶”ê°€ ì¤‘...');
                const docRef = await addDoc(collection(window.firebaseDb, 'connection-test'), testData);
                console.log('âœ… í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¶”ê°€ ì„±ê³µ! ë¬¸ì„œ ID:', docRef.id);
                
                // í…ŒìŠ¤íŠ¸ ë°ì´í„° ì½ê¸°
                console.log('í…ŒìŠ¤íŠ¸ ë°ì´í„° ì½ê¸° ì¤‘...');
                const querySnapshot = await getDocs(collection(window.firebaseDb, 'connection-test'));
                const testResults = [];
                querySnapshot.forEach((doc) => {
                    testResults.push({ id: doc.id, ...doc.data() });
                });
                console.log('âœ… í…ŒìŠ¤íŠ¸ ë°ì´í„° ì½ê¸° ì„±ê³µ! ì´', testResults.length, 'ê°œ ë¬¸ì„œ');
                
                // í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬ (ë°©ê¸ˆ ì¶”ê°€í•œ ê²ƒë§Œ ì‚­ì œ)
                await deleteDoc(doc(window.firebaseDb, 'connection-test', docRef.id));
                console.log('âœ… í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬ ì™„ë£Œ');
                
                // ì—°ê²° ì„±ê³µ ì•Œë¦¼
                alert('ğŸ‰ Firebase ì—°ê²° ì„±ê³µ!\n\n- Firestore ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸\n- ë°ì´í„° ì½ê¸°/ì“°ê¸° í…ŒìŠ¤íŠ¸ ì™„ë£Œ\n- ìì„¸í•œ ë‚´ìš©ì€ ê°œë°œì ë„êµ¬ ì½˜ì†”ì„ í™•ì¸í•˜ì„¸ìš”.');
                
                return true;
                
            } catch (error) {
                console.error('âŒ Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨:', error);
                alert('âŒ Firebase ì—°ê²° ì‹¤íŒ¨!\n\nì˜¤ë¥˜: ' + error.message + '\n\nìì„¸í•œ ë‚´ìš©ì€ ê°œë°œì ë„êµ¬ ì½˜ì†”ì„ í™•ì¸í•˜ì„¸ìš”.');
                return false;
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', async function() {
            setDefaultDateRange();
            checkFirebaseConnection();
            console.log('ë¯¸ë””ì–´ ê´€ë¦¬ ë³´ë„ìë£Œ ëª©ë¡ í˜ì´ì§€ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
            
            // Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ ìë™ ì‹¤í–‰
            setTimeout(async () => {
                const isConnected = await testFirebaseConnection();
                if (isConnected) {
                    // Firebase ì—°ê²° ì„±ê³µ ì‹œ ê²Œì‹œê¸€ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
                    try {
                        const pressReleases = await loadPressReleasesFromFirebase();
                        displayPressReleases(pressReleases);
                        console.log('ê²Œì‹œê¸€ ëª©ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    } catch (error) {
                        console.error('ê²Œì‹œê¸€ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
                    }
                }
            }, 2000); // 2ì´ˆ í›„ ìë™ í…ŒìŠ¤íŠ¸
        });

        // ê²€ìƒ‰ì–´ ì…ë ¥ ì‹œ ì—”í„°í‚¤ ì²˜ë¦¬
        document.getElementById('searchKeyword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchPress();
            }
        });

        // ë””ìŠ¤í¬ë¦½ì…˜ í¸ì§‘ ëª¨ë“œ í† ê¸€
        let isEditMode = false;

        function toggleEditMode() {
            const editBtn = document.getElementById('editDescriptionBtn');
            const descriptionItems = document.querySelectorAll('.description-item');
            
            isEditMode = !isEditMode;
            
            if (isEditMode) {
                // í¸ì§‘ ëª¨ë“œë¡œ ì „í™˜
                editBtn.textContent = 'ì™„ë£Œ';
                editBtn.classList.add('complete');
                
                descriptionItems.forEach(item => {
                    item.classList.add('edit-mode');
                    const textDiv = item.querySelector('.description-text');
                    const formDiv = item.querySelector('.edit-form');
                    
                    textDiv.classList.add('hidden');
                    formDiv.classList.add('active');
                });
            } else {
                // í¸ì§‘ ëª¨ë“œ ì¢…ë£Œ ë° ì €ì¥
                editBtn.textContent = 'ìˆ˜ì •';
                editBtn.classList.remove('complete');
                
                descriptionItems.forEach(item => {
                    item.classList.remove('edit-mode');
                    const textDiv = item.querySelector('.description-text');
                    const formDiv = item.querySelector('.edit-form');
                    const input = formDiv.querySelector('input');
                    const textarea = formDiv.querySelector('textarea');
                    const h4 = item.querySelector('h4');
                    const p = textDiv.querySelector('p');
                    
                    // ì…ë ¥ëœ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸
                    const itemId = item.getAttribute('data-id');
                    h4.textContent = `${itemId}. ${input.value}`;
                    p.textContent = textarea.value;
                    
                    textDiv.classList.remove('hidden');
                    formDiv.classList.remove('active');
                });
                
                // Firebaseì— ë””ìŠ¤í¬ë¦½ì…˜ ì €ì¥
                await saveDescriptionsToFirebase();
                
                // ì €ì¥ ì™„ë£Œ ì•Œë¦¼
                alert('ë””ìŠ¤í¬ë¦½ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // í¸ì§‘ ëª¨ë“œì—ì„œ ESC í‚¤ë¡œ ì·¨ì†Œ
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && isEditMode) {
                // í¸ì§‘ ëª¨ë“œ ì·¨ì†Œ
                const editBtn = document.getElementById('editDescriptionBtn');
                const descriptionItems = document.querySelectorAll('.description-item');
                
                isEditMode = false;
                editBtn.textContent = 'ìˆ˜ì •';
                editBtn.classList.remove('complete');
                
                descriptionItems.forEach(item => {
                    item.classList.remove('edit-mode');
                    const textDiv = item.querySelector('.description-text');
                    const formDiv = item.querySelector('.edit-form');
                    
                    textDiv.classList.remove('hidden');
                    formDiv.classList.remove('active');
                });
            }
        });
    </script>
</body>
</html>
